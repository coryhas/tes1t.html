define("slotplacement-libs/jquerycookie",["jquery"],function(e){return u=e,f=document,t=/\+/g,u.cookie=function(e,t,i){if(void 0!==t&&!/Object/.test(Object.prototype.toString.call(t))){if(i=u.extend({},u.cookie.defaults,i),null===t&&(i.expires=-1),"number"==typeof i.expires){var r=i.expires,a=i.expires=new Date;a.setDate(a.getDate()+r)}return t=String(t),f.cookie=[encodeURIComponent(e),"=",i.raw?t:encodeURIComponent(t),i.expires?"; expires="+i.expires.toUTCString():"",i.path?"; path="+i.path:"",i.domain?"; domain="+i.domain:"",i.secure?"; secure":""].join("")}for(var n,o=(i=t||u.cookie.defaults||{}).raw?d:l,s=f.cookie.split("; "),c=0;n=s[c]&&s[c].split("=");c++)if(o(n.shift())===e)return o(n.join("="));return null},u.cookie.defaults={},u.removeCookie=function(e,t){return null!==u.cookie(e,t)&&(u.cookie(e,null,t),!0)},e.cookie;function d(e){return e}function l(e){return decodeURIComponent(e.replace(t," "))}var u,f,t}),define("slotplacement-libs/jqueryOnScreen",["jquery"],function(d){d.fn.isOnScreen=function(e,t){null!=e&&void 0!==e||(e=1),null!=t&&void 0!==t||(t=1);var i=d(window),r={top:i.scrollTop(),left:i.scrollLeft()};r.right=r.left+i.width(),r.bottom=r.top+i.height();var a=this.outerHeight(),n=this.outerWidth();if(!n||!a)return!1;var o=this.offset();if(o.right=o.left+n,o.bottom=o.top+a,!!(r.right<o.left||r.left>o.right||r.bottom<o.top||r.top>o.bottom))return!1;var s=Math.min(1,(o.bottom-r.top)/a),c=Math.min(1,(r.bottom-o.top)/a);return e<=Math.min(1,(o.right-r.left)/n)*Math.min(1,(r.right-o.left)/n)&&t<=s*c}}),function(e){function o(e,t,i,r,a){this._listener=t,this._isOnce=i,this.context=r,this._signal=e,this._priority=a||0}function r(e,t){if("function"!=typeof e)throw new Error("listener is a required param of {fn}() and should be a Function.".replace("{fn}",t))}function t(){this._bindings=[],this._prevParams=null;var e=this;this.dispatch=function(){t.prototype.dispatch.apply(e,arguments)}}t.prototype={VERSION:"1.0.0",memorize:!(o.prototype={active:!0,params:null,execute:function(e){var t,i;return this.active&&this._listener&&(i=this.params?this.params.concat(e):e,t=this._listener.apply(this.context,i),this._isOnce&&this.detach()),t},detach:function(){return this.isBound()?this._signal.remove(this._listener,this.context):null},isBound:function(){return!!this._signal&&!!this._listener},isOnce:function(){return this._isOnce},getListener:function(){return this._listener},getSignal:function(){return this._signal},_destroy:function(){delete this._signal,delete this._listener,delete this.context},toString:function(){return"[SignalBinding isOnce:"+this._isOnce+", isBound:"+this.isBound()+", active:"+this.active+"]"}}),_shouldPropagate:!0,active:!0,_registerListener:function(e,t,i,r){var a,n=this._indexOfListener(e,i);if(-1!==n){if((a=this._bindings[n]).isOnce()!==t)throw new Error("You cannot add"+(t?"":"Once")+"() then add"+(t?"Once":"")+"() the same listener without removing the relationship first.")}else a=new o(this,e,t,i,r),this._addBinding(a);return this.memorize&&this._prevParams&&a.execute(this._prevParams),a},_addBinding:function(e){for(var t=this._bindings.length;--t,this._bindings[t]&&e._priority<=this._bindings[t]._priority;);this._bindings.splice(t+1,0,e)},_indexOfListener:function(e,t){for(var i,r=this._bindings.length;r--;)if((i=this._bindings[r])._listener===e&&i.context===t)return r;return-1},has:function(e,t){return-1!==this._indexOfListener(e,t)},add:function(e,t,i){return r(e,"add"),this._registerListener(e,!1,t,i)},addOnce:function(e,t,i){return r(e,"addOnce"),this._registerListener(e,!0,t,i)},remove:function(e,t){r(e,"remove");var i=this._indexOfListener(e,t);return-1!==i&&(this._bindings[i]._destroy(),this._bindings.splice(i,1)),e},removeAll:function(){for(var e=this._bindings.length;e--;)this._bindings[e]._destroy();this._bindings.length=0},getNumListeners:function(){return this._bindings.length},halt:function(){this._shouldPropagate=!1},dispatch:function(){if(this.active){var e,t=Array.prototype.slice.call(arguments),i=this._bindings.length;if(this.memorize&&(this._prevParams=t),i)for(e=this._bindings.slice(),this._shouldPropagate=!0;e[--i]&&this._shouldPropagate&&!1!==e[i].execute(t););}},forget:function(){this._prevParams=null},dispose:function(){this.removeAll(),delete this._bindings,delete this._prevParams},toString:function(){return"[Signal active:"+this.active+" numListeners:"+this.getNumListeners()+"]"}};var i=t;i.Signal=t,"function"==typeof define&&define.amd?define("slotplacement-libs/signal",[],function(){return i}):"undefined"!=typeof module&&module.exports?module.exports=i:e.signals=i}(this);var __extends=this&&this.__extends||function(){var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)};return function(e,t){function i(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),__importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},__assign=this&&this.__assign||function(){return(__assign=Object.assign||function(e){for(var t,i=1,r=arguments.length;i<r;i++)for(var a in t=arguments[i])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},__rest=this&&this.__rest||function(e,t){var i={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(i[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(i[r[a]]=e[r[a]])}return i};define("mktui-fx/ads/topic",["require","exports","jquery","slotplacement-libs/signal"],function(e,t,c,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),c=__importDefault(c);var r,a={},n=(r=i.Signal,__extends(o,r),o.prototype.clear=function(){return this.forget.apply(this,arguments)},o.prototype.once=function(){return this.addOnce.apply(this,arguments)},o.prototype.publish=function(e){return this.dispatch.apply(this,arguments)},o.prototype.subscribe=function(e,t,i){return this.add.apply(this,arguments)},o.prototype.unsubscribe=function(){return this.remove.apply(this,arguments)},o);function o(e){var t=r.call(this)||this;return t.memorize=!0,t.name=e||"",t}function d(e){var t=e&&a[e];return t||(t=new n(e),e&&(a[e]=t)),t}(t.Topic=d).Channel=n,d.channels=a,d.exists=function(e){return!!a[e]},d.publish=function(e,t){for(var i=e.split(" "),r=0,a=i.length;r<a;r++){var n=d(i[r]);n.publish.apply(n,t||[])}},d.subscribe=function(e,t,i){var r,a,n={},o={},s=0;return c.default.isPlainObject(e)?(n=e,i=Array.prototype.pop.call(arguments),t=void 0):n[e]=t,c.default.each(n,function(e,t){r=d(e),i=i||r,a=function(){t.apply(i,arguments)},r.subscribe(a),o[e]=a,s++}),1===s?o[e]:o},d.unsubscribe=function(e,t){var i={};c.default.isPlainObject(e)?i=e:i[e]=t,c.default.each(i,function(e,t){d(e).unsubscribe(t)})}}),define("mktui-fx/ads/analytics/AnalyticsChannels",["require","exports"],function(e,t){"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),(i=t.AnalyticsChannels||(t.AnalyticsChannels={})).impressionChannel="requestAdvertisementActionsDisplay",i.clickChannel="requestAdvertisementDetails"}),define("mktui-fx/ads/analytics/AnalyticsEvents",["require","exports"],function(e,t){"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),(i=t.AnalyticsEvents||(t.AnalyticsEvents={})).impression="impression",i.click="click"}),define("mktui-fx/ads/decision/DecisionRecord",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});function i(){this.turl="",this.ctype="html",this.url="",this.targetsize="",this.target="",this.status=!1,this.privateDestination=!1}t.DecisionRecord=i}),define("mktui-fx/ads/decision/DecisionResponse",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),define("mktui-fx/ads/analytics/adDataStore",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={},r=(a.prototype.getPageData=function(e){return i[e]},a.prototype.getPlacementData=function(e,t){return i[e]?i[e][t]:""},a.prototype.addPage=function(e,t){i[e]=t},a);function a(){}t.AdDataStore=r,t.adDataStore=new r}),define("mktui-fx/ads/analytics/analyticsLiteService",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=(r.prototype.isAnalyticsReportingSupported=function(){return window.analyticsLite&&window.analyticsLite.hooks&&window.analyticsLite.hooks.convertReportingJsData},r.prototype.sendImpression=function(e){window.analyticsLite.hooks.convertReportingJsData(e)},r.prototype.isAdOperationSupported=function(){return window.analyticsLite&&window.analyticsLite.hooks&&window.analyticsLite.hooks.sendAdOperation},r.prototype.sendAdOperation=function(e){window.analyticsLite.hooks.sendAdOperation(e)},r.prototype.isAdLogSupported=function(){return window.analyticsLite&&window.analyticsLite.hooks&&window.analyticsLite.hooks.logger},r.prototype.sendAdLog=function(e){window.analyticsLite.hooks.logger(e)},r);function r(){}t.AnalyticsLiteService=i,t.analyticsLiteService=new i}),define("slotplacement/clientconfig",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={}}),define("mktui-fx/common/adConfig",["require","exports","slotplacement/slotplacementconfig","slotplacement/clientconfig"],function(e,t,i,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i=__importDefault(i),r=__importDefault(r);var a=function(){this.isAnalyticsEnabled=!1,this.adTrackingDisabled=!1,this.isPixelTagEnabled=!1,this.loggingEnabled=!1,this.debugEnabled=!1,this.duplicateImpressionTracking=!1,this.eci="",this.pfid="",this.frameworkVersion="6_0_0_01292020_113932",this.offerDetails={},this.borrowingPowerPlacements=["bpheader","lobtile1","lobtile2","lobtile3"]},n=__assign(__assign({},i.default),r.default),o=n.loggingEnabled,s=n.debugEnabled,c=n.adTrackingDisabled,d=n.isAnalyticsEnabled,l=n.isPixelTagEnabled,u=n.duplicateImpressionTracking,f=__rest(n,["loggingEnabled","debugEnabled","adTrackingDisabled","isAnalyticsEnabled","isPixelTagEnabled","duplicateImpressionTracking"]);t.adConfig=__assign(__assign(__assign({},new a),f),{get loggingEnabled(){return window.console&&o&&"true"===o},get debugEnabled(){return window.console&&s&&"true"===s},get adTrackingDisabled(){return c&&"true"===c},get isAnalyticsEnabled(){return d&&"true"===d},get isPixelTagEnabled(){return l&&"true"===l},get duplicateImpressionTracking(){return u&&"true"===u},isLoggingEnabled:function(){return window.console&&this.loggingEnabled},isDebugEnabled:function(){return window.console&&this.debugEnabled}})}),define("mktui-fx/util/featureDetection",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.supportsCookies=function(){return void 0!==document.cookie},t.supportsXhrCORS=function(){return XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}}),define("mktui-fx/util/CookieReader",["require","exports","jquery","slotplacement-libs/jquerycookie"],function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),a=__importDefault(a);var i=window.document.domain,r=window.location.protocol,n=/localhost|127\.0\.0\.1/.test(i),o=/\b\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}\b/.test(i),s=/https/.test(r),c=function(){var e;n||(o?e=i:i&&-1!==i.indexOf(".")&&(e="."+i.split(".").slice(-2).join(".")));return e}(),d={};t.CookieReader=function(r,e){var t=r&&d[r];return t||(t={settings:e||{},erase:function(e){var t=a.default.extend({},this.settings,e||{});try{a.default.removeCookie(r,t)}catch(e){}},read:function(){var e;try{e=a.default.cookie(r)}catch(e){}return e},write:function(e,t){var i=a.default.extend({},this.settings,t||{});try{a.default.cookie(r,e,i)}catch(e){}}},r&&(d[r]=t)),t},a.default.cookie.defaults=a.default.extend({path:"/",secure:s,raw:!0},c?{domain:c}:{}),t.readCookie=function(e){return t.CookieReader(e).read()}}),define("mktui-fx/environment/VFirstCookie",["require","exports","mktui-fx/util/featureDetection","mktui-fx/util/CookieReader"],function(e,t,i,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.VFirstCookie=void 0,i.supportsCookies()&&(t.VFirstCookie=function(){var t=r.CookieReader("v1st"),i=/^\w+$/;return{read:function(){var e=t.read();return i.test(e)||(e=void 0),e}}})}),define("mktui-fx/environment/PersonaCookie",["require","exports","jquery","mktui-fx/util/featureDetection","mktui-fx/util/CookieReader"],function(e,t,u,i,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),u=__importDefault(u);var a=function(){this.pfid="",this.ECI="",this.locale="",this.segment="",this.zip=""};if(t.Persona=a,i.supportsCookies()){window.document;var n=function(e,t,i){var r=i[e];if(r)for(var a=0,n=r.length;a<n;a++)if(t==r[a])return"Y";return"N"},f=function(e,t){if(-1===e.indexOf(t))return e;var i=e.charAt(e.length-1)===t,r=i&&e.charAt(e.length-2)===t;return(i&&!r?e.substring(0,e.length-1):e).split(t)},o=u.default.proxy(r.CookieReader,this,"PC_1_0",{expires:365});t.PersonaCookie=function(){return{read:function(e){e=e||!1;var t,i=o().read();if(e)t=i;else try{(i=function(e){for(var t=f(unescape(e),"|"),i={},r=0,a=t.length;r<a;r++){var n=t[r].split("="),o=n[0],s=f(decodeURIComponent(n[1]),"&");if(u.default.isArray(s))for(var c=0,d=s.length;c<d;c++){var l=s.shift();l=l.split(","),s.push(l)}else s=f(s,",");i[o]=s}return i}(i)).pplr=n("ppl","A",i),i.fieir=n("fiei","Y",i),i.fpeir=n("fpei","Y",i),i.sieir=n("siei","Y",i),i.tieir=n("tiei","Y",i),i.accounts=function(e){var t={};if(e)for(var i=0,r=e.length;i<r;i++){var a=e[i];t[a[0]]={},t[a[0]].uratc=a[1],t[a[0]].rwdb=a[2]}return t}(i.accts),t=i}catch(e){}return __assign(__assign({},new a),t)}}}}}),define("mktui-fx/common/adConstants",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.adConstants={analytics:{defaultAdId:"62146166",web:{adEventCode:"13"}},apiErrors:{noData:"No_Data",noResponseKeys:"No_Response_Keys",noStatusCode:"No_Status_Code"},contentErrors:{noData:"No_Data"},cardlyricsApiNames:{hash:"Hash_Api",secToken:"SecurityToken_Api",getOfferCountDetail:"GetOfferCountDetail_Api",getSession:"getSession_Api",getOffers:"getOffers_Api"},httpStatusOk:200,httpReadyStateOk:4,ssv_channel:"web",clientId:"mkt-adf-version-6_0_0_01292020_113932",cidVersionMapping:{"1.0":"1.0/{{channel}}",1.1:"1.1/{{channel}}/{{language}}"},cookies:{iosEci:"primaryECI",androidEci:"primaryEci",profileId:"profileId"}}}),define("mktui-fx/environment/channelEnvironment",["require","exports","mktui-fx/environment/VFirstCookie","jquery","mktui-fx/environment/PersonaCookie","mktui-fx/common/adConfig","mktui-fx/util/CookieReader","mktui-fx/common/adConstants"],function(e,t,i,r,a,n,o,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r=__importDefault(r);var c=(d.prototype.getVFirstId=function(){return i.VFirstCookie().read()||""},d.prototype.getResolvedEci=function(){return this.getPersona().ECI||n.adConfig.eci||o.CookieReader(s.adConstants.cookies.iosEci).read()||o.CookieReader(s.adConstants.cookies.androidEci).read()||""},d.prototype.getResolvedProfileId=function(){return this.getPersona().pfid||n.adConfig.pfid||o.CookieReader(s.adConstants.cookies.profileId).read()||""},d.prototype.getPersona=function(){return r.default.isFunction(a.PersonaCookie)?a.PersonaCookie().read():new a.Persona},d.prototype.getChannel=function(){return window.Blue&&window.Blue.version?"cxo":"public"},d.prototype.isCXO=function(){return window.Blue&&window.Blue.version},d);function d(){}t.ChannelEnvironment=c,t.channelEnvironment=new c}),define("mktui-fx/util/Logger",["require","exports","jquery","mktui-fx/common/adConfig","mktui-fx/environment/channelEnvironment","mktui-fx/ads/analytics/analyticsLiteService"],function(e,t,r,a,n,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r=__importDefault(r);var s={};t.Logger={logErrorMsg:function(t,i){n.channelEnvironment.isCXO()?window.require(["blue/log"],function(e){r.default.isEmptyObject(s)&&(s=e("[ad-framework-messages]")),s.error(t,i)}):o.analyticsLiteService.isAdLogSupported()?o.analyticsLiteService.sendAdLog({logType:"log",message:t}):a.adConfig.isLoggingEnabled()&&console.log(t,i)},logErrorMsgObject:function(e,t){t&&(t.adfError=!0,t.errorType=e,t.fxVersion=a.adConfig.frameworkVersion,t.userAgent=window.navigator.userAgent,t.channel=n.channelEnvironment.isCXO()?"cxo":"public",this.logErrorMsg(t))},logDebugMsg:function(t,i){n.channelEnvironment.isCXO()&&window.require(["blue/log"],function(e){r.default.isEmptyObject(s)&&(s=e("[ad-framework-messages]")),s.debug(t,i)}),a.adConfig.isDebugEnabled()&&console.log(t,i)},logMsg:function(e,t){a.adConfig.isLoggingEnabled()&&console.log(e,t)},debugMsg:function(e,t){a.adConfig.isDebugEnabled()&&console.log(e,t)}}}),define("mktui-fx/common/adErrorTypes",["require","exports"],function(e,t){"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),(i=t.adErrorTypes||(t.adErrorTypes={})).decision_fail="decision_fail",i.decision_timeout_fail="decision_timeout_fail",i.content_fail="content_fail",i.api_data_fail="api_data_fail",i.data_replace_fail="data_replace_fail",i.creative_mismatch="creative_mismatch",i.duplicate_impression="duplicate_impression",i.failover_service_error="failover_service_error",i.no_page_id="no_page_id",i.cardlytics_error="cardlytics_error",i.midas_turl_missing="midas_turl_missing",i.failover_ad_load="failover_ad_load",i.no_decision_url="no_decision_url",i.plc_config_fail="plc_config_fail"}),define("mktui-fx/util/cors",["require","exports","jquery","mktui-fx/util/featureDetection"],function(e,t,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r=__importDefault(r);var n={xhrFields:{withCredentials:!0}};r.default.ajaxPrefilter(function(e,t,i){if(("cors"===e.dataType||e.crossDomain&&e.async&&"script"!==e.dataType&&"jsonp"!==e.dataType)&&(e=r.default.extend({},n,e),!a.supportsXhrCORS()))return"cors"}),r.default.corsAjax=function(e,t){r.default.isPlainObject(e)?(t=e,e=void 0):(t=t||{}).url=e;var i=r.default.extend({dataType:"html"},t);return r.default.ajax(i)},t.CORS=r.default.corsAjax}),define("mktui-fx/util/formatter",["require","exports"],function(require,exports){"use strict";function formatCurrency(e){return!1===isNaN(e)?"$"+parseInt(e).toLocaleString("en"):e}function formatRate(e,t){return!1===isNaN(e)?(100*parseFloat(e)).toFixed(t)+"%":e}function formatDayMonth(e){return(e.getMonth()<9?"0"+(e.getMonth()+1):e.getMonth()+1)+"/"+(e.getDate()<10?"0"+e.getDate():e.getDate())}function formatDate(e){e=(e=e.splice(4,0,"/")).splice(7,0,"/ ");var t=new Date(e);return 0!=isNaN(t)?e:(t.getMonth()<10?"0"+(t.getMonth()+1):t.getMonth()+1)+"/"+(t.getDate()<10?"0"+t.getDate():t.getDate())}function formatDateUsEn(e){try{return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"numeric",day:"numeric"}).format(new Date(e))}catch(e){return"--"}}function formatUseDate(value,key){var monthNames=["Jan","Feb","Mar","APR","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];try{var date=eval("new "+value.split("/")[1]+";");switch(key){case"rettileexpired":case"cpdetexpired":return monthNames[date.getMonth()]+" "+date.getDate()+", "+date.getFullYear();case"retdetexpired":var formattedDate=formatDayMonth(date);return formattedDate+"/"+date.getFullYear();case"cptileexpired":return monthNames[date.getMonth()]+" "+date.getDate()}}catch(e){console.log("Date Format Error",e)}return value}function formatBadge(e){return 100<=e?"99+":e}function isInt(e){return Number(e)==e&&e%1==0}function isFloat(e){return Number(e)===e&&e%1!=0}function formatAmount(e){return isInt(e)?e:isFloat(e)?e.toFixed(2):e}function formatGeneral(e){return parseFloat(e)}function formatNumber(e){return!1===isNaN(e)?parseInt(e).toLocaleString("en"):e}function formatMonthDayYear(e){var t=e+"T00:00:00";return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"2-digit",day:"2-digit"}).format(new Date(t))}function formatCurrencyFloor(e,t){if(isInt(e))return"$"+(t?e.toFixed(2):e).toLocaleString("en");if(isFloat(e)){var i=String(e).split(".");return"$"+(2==i.length?Number(i[0]).toLocaleString("en")+"."+padZeros(i[1].substring(0,2),2):Number(i[0]).toLocaleString("en"))}return e}function padZeros(e,t){if(e.length>=t)return e;for(var i=e,r=0;r<t-e.length;r++)i+="0";return i}function format(e,t,i){if(null!=e&&null!=e&&t)switch("string"==typeof t&&(t=t.toLowerCase()),t){case"emergencyfundamount":case"moneytoinvestamount":case"totalprimarycardbalance":case"averageinvestmentbalance":case"totalprimarydepositbalance":case"averagemonthlycontributionamount":case"payment":case"downpayment":case"homeprice":case"examplecreditamountwithoriginationfee":case"creditamount":case"creditlimitincrease":case"cashoutamount":return formatCurrency(e);case"rate":case"annualpercentagerate":return formatRate(e,"gr_home_mortgage_refinance_cashout"===(i=(i=i||"").toLowerCase())||"gr_home_mortgage_purchase"===i?3:2);case"downpaymentpercentage":return formatRate(e,0);case"exampleannualpercentageratewithoriginationfee":return formatRate(e,2);case"exampletermmonthswithoriginationfee":return e;case"expirydate":return formatDate(e);case"retdetexpired":case"rettileexpired":case"cptileexpired":case"cpdetexpired":return formatUseDate(e,t);case"totalearned":return Number.isInteger(e)?e.toFixed(2):e;case"offeredamount":return formatAmount(e);case"adofferscount":return formatBadge(e);case"ratediscountinpoints":return formatGeneral(e);case"totalamount":case"potentialcashback":return formatCurrencyFloor(e,!1);case"potentialpoints":return formatNumber(e);case"marketinggenerationtimestamp":return formatDateUsEn(e);case"rewardbalanceasofdate":return formatMonthDayYear(e);case"totalrewardbalance":case"potentialrewardbalance":return formatNumber(e)}return e}Object.defineProperty(exports,"__esModule",{value:!0});var Formatter=function(){this.version="1.0",this.format=format};exports.Formatter=Formatter,exports.formatter=new Formatter}),define("mktui-fx/ads/personalization/OfferResponse",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),define("mktui-fx/ads/personalization/personalizationHelper.service",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isOfferDataAvailable=function(e){return"SUCCESS"===e.code&&void 0!==e.offers&&0<Object.keys(e.offers).length&&void 0===e.offers.faultCode},t.isOfferDataImpression=function(e){return!e.insightType}}),define("mktui-fx/ads/content/ContentResponse",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),define("mktui-fx/ads/personalization/PersonalizationParameter",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),define("mktui-fx/ads/personalization/icon.service",["require","exports","jquery","mktui-fx/common/adConfig","mktui-fx/common/adConstants","mktui-fx/util/cors","mktui-fx/environment/channelEnvironment","mktui-fx/ads/personalization/personalizationHelper.service"],function(e,t,d,l,u,f,p,m){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),d=__importDefault(d),t.iconService={getPersonalizationData:function(e,t){var r=d.default.Deferred(),i=p.channelEnvironment.getResolvedEci(),a=p.channelEnvironment.getResolvedProfileId(),n=t.cid||"",o=""+t.midas_id,s=""+t.midas_id,c={url:l.adConfig.iconOfferServiceUrl,dataType:"json",timeout:l.adConfig.timeoutOfferApi,method:"POST",headers:{"x-jpmc-csrf-token":"NONE","profile-id":a},xhrFields:{withCredentials:!1},data:{eci:i,cid:n,adf_traceid:o,midas_id:s}};return f.CORS(c).done(function(e){if(m.isOfferDataAvailable(e)){var t=m.isOfferDataImpression(e.offers);r.resolve(e.offers,t)}else r.reject({details:u.adConstants.apiErrors.noData,crmodsStatus:e.code||u.adConstants.apiErrors.noStatusCode,httpStatus:u.adConstants.httpStatusOk,httpReadyState:u.adConstants.httpReadyStateOk})}).fail(function(e,t,i){r.reject({details:"Error-"+(t||""),httpStatus:e.status,httpReadyState:e.readyState})}),r.promise()}}}),define("mktui-fx/ads/personalization/legacydata.service",["require","exports","jquery","mktui-fx/common/adConfig","mktui-fx/common/adConstants","mktui-fx/util/cors","mktui-fx/environment/channelEnvironment"],function(e,t,a,c,n,o,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),a=__importDefault(a);var l={insights:"personalizedinsights",borrowingPower:"offerbylob"},s="CIG_",u="SUCCESS";function f(e){return e&&-1<e.indexOf(l.borrowingPower)}function p(e,t){var i=d.channelEnvironment.getResolvedEci(),r=d.channelEnvironment.getResolvedProfileId(),a=""+t.midas_id,n=""+t.midas_id,o={dataType:"json",timeout:c.adConfig.timeoutOfferApi,method:"POST",headers:{"x-jpmc-csrf-token":"NONE"},xhrFields:{withCredentials:!1}};if(function(e){return e&&-1<e.indexOf(l.insights)}(e.apiUrl))o.url=e.apiUrl,o.data={profileId:r,context:e.personalizedKey,adf_traceid:a,midas_id:n};else if(f(e.apiUrl)){var s=e.lob||"";o.url=e.apiUrl.replace(/{{lob}}/g,s),o.data={eci:i,adf_traceid:a,midas_id:n}}else o.url=e.apiUrl,o.data={eci:i,adf_traceid:a,midas_id:n};return o}t.legacyDataService={getPersonalizationData:function(t,e){var r=a.default.Deferred(),i=p(t,e);return o.CORS(i).done(function(e){!function(e,t,i){if(e.code!==u||void 0===e.offers||void 0===e.offers[t.personalizedKey]||f(t.apiUrl))if(e.code===u&&void 0!==e.offers&&f(t.apiUrl)){var r=Object.keys(e.offers);0<r.length?i.resolve(e.offers[r[0]],!0):i.reject({details:n.adConstants.apiErrors.noResponseKeys,crmodsStatus:e.code,httpStatus:n.adConstants.httpStatusOk,httpReadyState:n.adConstants.httpReadyStateOk})}else if(null!=e.insights&&null!=e.insights[0]){var a=e.insights[0];a.insightType===s+t.personalizedKey&&i.resolve(a.insightDetails)}else i.reject({details:n.adConstants.apiErrors.noData,crmodsStatus:e.code||n.adConstants.apiErrors.noStatusCode,httpStatus:n.adConstants.httpStatusOk,httpReadyState:n.adConstants.httpReadyStateOk});else i.resolve(e.offers[t.personalizedKey],!0)}(e,t,r)}).fail(function(e,t,i){r.reject({details:"Error-"+(t||""),httpStatus:e.status,httpReadyState:e.readyState})}),r.promise()}}}),define("mktui-fx/ads/personalization/personalization.service",["require","exports","mktui-fx/common/adConfig","mktui-fx/util/Logger","mktui-fx/ads/personalization/icon.service","mktui-fx/ads/personalization/legacydata.service"],function(e,t,i,c,r,a){"use strict";function n(e,t){return i.adConfig.iconPageIds[e]&&-1<i.adConfig.iconPageIds[e].indexOf(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.isICONEnabled=n,t.personalizationService={logPersonalizedError:function(e){var t=e.errorType,i=e.errorDetails,r=e.contentLocation,a=e.dataReqStartTime,n=e.adVariation,o=e.adParameters,s=e.decisionResultToUse;c.Logger.logErrorMsgObject(t,{details:i&&i.details,httpStatus:i&&i.httpStatus,crmodsStatus:i&&i.crmodsStatus,httpReadyState:i&&i.httpReadyState,offerApiUrl:n.offerApiUrl,offerKey:n.offerKey,cid:r,placementId:o.pid||"",responseTime:Date.now()-a,creativeId:s.creativeId||"--",interactionID:s.interactionID||"--",midasId:s.midas_id,adfTraceId:s.adf_traceid})},getPersonalizationData:function(e,t){var i=t.pid||t.placement||"";return e.apiUrl=e.offerApiUrl||e.serviceUrl||"",e.personalizedKey=e.offerKey||e.personalizedFor||"",n(t.pageId,i)?r.iconService.getPersonalizationData(e,t):a.legacyDataService.getPersonalizationData(e,t)}}}),define("mktui-fx/ads/content/failover/IFailoverDetail",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),define("mktui-fx/ads/content/failover/IPlacementFailover",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),define("mktui-fx/common/AdError",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});function i(e){this.adfError=!0,this.errorType=e}t.AdError=i}),define("mktui-fx/common/AdErrorBuilder",["require","exports","mktui-fx/common/AdError"],function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=(a.prototype.getError=function(){return this.adError},a.prototype.errorReason=function(e){return void 0===e&&(e=""),this.adError.errorReason=e,this},a.prototype.httpStatus=function(e){return void 0===e&&(e=-100),this.adError.httpStatus=e,this},a.prototype.httpReady=function(e){return void 0===e&&(e=-100),this.adError.httpReady=e,this},a.prototype.respTime=function(e){return void 0===e&&(e=-1),this.adError.respTime=e,this},a.prototype.respStatus=function(e){return void 0===e&&(e=""),this.adError.respStatus=e,this},a.prototype.pageId=function(e){return void 0===e&&(e=""),this.adError.pageId=e,this},a.prototype.placementId=function(e){return void 0===e&&(e=""),this.adError.placementId=e,this},a.prototype.creativeId=function(e){return void 0===e&&(e=""),this.adError.creativeId=e,this},a.prototype.adfTraceId=function(e){return void 0===e&&(e=""),this.adError.adfTraceId=e,this},a.prototype.midasId=function(e){return void 0===e&&(e=""),this.adError.midasId=e,this},a.prototype.interactionId=function(e){return void 0===e&&(e=""),this.adError.interactionId=e,this},a.prototype.cid=function(e){return void 0===e&&(e=""),this.adError.cid=e,this},a.prototype.targetUrl=function(e){return void 0===e&&(e=""),this.adError.targetUrl=e,this},a.prototype.offerKey=function(e){return void 0===e&&(e=""),this.adError.offerKey=e,this},a.prototype.userAgent=function(e){return this.adError.userAgent=e,this},a.prototype.fxVersion=function(e){return this.adError.fxVersion=e,this},a);function a(e){this.adError=new i.AdError(e)}t.AdErrorBuilder=r}),define("mktui-fx/ads/content/failover/failover.service",["require","exports","jquery","mktui-fx/common/adConfig","mktui-fx/util/cors","mktui-fx/common/adErrorTypes","mktui-fx/util/Logger","mktui-fx/common/AdErrorBuilder"],function(e,t,c,d,l,u,f,p){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),c=__importDefault(c);var m={};function g(e){var t={};return e.success&&e.result.failOverDetails&&0<e.result.failOverDetails.length&&e.result.failOverDetails.forEach(function(e){e.slotId&&e.failoverAdId&&e.failoverAdUrl&&(t[e.slotId]={failoverAdId:e.failoverAdId,failoverAdUrl:e.failoverAdUrl})}),t}function r(e){return{creativeId:e.failoverAdId,cid:e.failoverAdUrl,timestamp:Date.now()}}t.failoverService={getFailOverAdData:function(e,t){void 0===t&&(t={});var i=c.default.Deferred();return e?m[e]?(i.resolve(m[e]),i.promise()):function(r,a){var n=c.default.Deferred();if(!d.adConfig.failOverAdServiceUrl)return void n.reject("Failover Url is not defined");var o=d.adConfig.failOverAdServiceUrl+"."+r+".json",e={url:o,dataType:"json",timeout:d.adConfig.timeoutFailover},s=Date.now();return l.CORS(e).then(function(e){var t=g(e);m[r]=t,n.resolve(t)},function(e,t,i){f.Logger.logErrorMsgObject(u.adErrorTypes.failover_service_error,new p.AdErrorBuilder(u.adErrorTypes.failover_service_error).pageId(r).placementId(a.pid||a.placement||"").adfTraceId(a.adf_traceid||"").midasId(a.midas_id||"").errorReason(i||t).targetUrl(o).httpStatus(e.status).httpReady(e.readyState).respTime(Date.now()-s).getError()),n.reject(i+"Error")}),n}(e,t).promise():(i.reject("Error - pageId is undefined"),i.promise())},createDecisionRecord:r,getFailoverDetailsByPlacement:g,transformFailoverToDecisionResponse:function(t){void 0===t&&(t={});var i={};return Object.keys(t).forEach(function(e){i[e]=r(t[e])}),i}}}),define("mktui-fx/common/AdLabels",["require","exports"],function(e,t){"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),(i=t.AdLabels||(t.AdLabels={})).defaultAd="default",i.decisionEngine="midas"}),define("mktui-fx/ads/content/content.service",["require","exports","jquery","mktui-fx/ads/topic","mktui-fx/common/adConfig","mktui-fx/util/Logger","mktui-fx/common/adErrorTypes","mktui-fx/common/adConstants","mktui-fx/util/cors","mktui-fx/util/formatter","mktui-fx/environment/channelEnvironment","mktui-fx/ads/personalization/personalization.service","mktui-fx/ads/content/failover/failover.service","mktui-fx/common/AdLabels"],function(e,h,C,b,r,k,I,O,i,s,x,S,c,f){"use strict";Object.defineProperty(h,"__esModule",{value:!0}),C=__importDefault(C);var A=r.adConfig.contentServer,a=r.adConfig.isAuthorMode,l=r.adConfig.isClassic;h.contentService={settings:{cache:!0},failOverData:{},isCrossDomain:function(e){var t=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/,i=t.exec(e.toLowerCase()),r=t.exec(document.location.protocol+"//"+document.location.host);return!(!r||!i||r[1]==i[1]&&r[2]==i[2]&&(r[3]||("http:"===r[1]?80:443))==(i[3]||("http:"===i[1]?80:443)))},manageOfferDataImpression:function(e,t,i){null!=r.adConfig.offerDetails&&null==r.adConfig.offerDetails[e]&&null!=i.offerId&&(r.adConfig.offerDetails[e]=i.offerId)},getContentLocation:function(e){var t=e||"";return"/"==e.charAt(0)&&(t=A+e),t=t.replace("jcr:content","_jcr_content"),"true"===(a=a||"false")&&(-1===t.indexOf("?")?t+="?wcmmode=disabled":t+="&wcmmode=disabled"),t=(t=(t=t.replace("{{content_placeholder}}",O.adConstants.cidVersionMapping[h.contentService.getVersion()])).replace(/{{channel}}/g,h.contentService.getChannel())).replace(/{{extension}}/g,h.contentService.getExtension())},getVersion:function(){return"1.0"},isCXOChannel:function(){return"cxo"===this.getChannel()},getChannel:function(){return window.Blue&&window.Blue.version?"cxo":"public"},getExtension:function(){return window.Blue&&window.Blue.version?"json":"html"},evaluateDynamicAd:function(e,t){var i=t.audiences?t.audiences.split(","):[];var r,a=JSON.parse(e),n={};for(var o in a.result.permutations)if(""!=a.result.permutations[o].rules){var s="",c=a.result.permutations[o].rules.split(" ");for(var d in c)if(-1!==c[d].indexOf("hA")){var l=c[d].substring(4,c[d].length-2);s+=(r=l,-1<C.default.inArray(r,i))}else s+=c[d];if(new Function("return "+s)()){n.adVariantData=a.result.permutations[o].adVariationContext,n.html=a.result.permutations[o].html,n.offerKey=a.result.permutations[o].offerKey,n.lob=a.result.permutations[o].lob,n.disclosure=void 0!==a.result.permutations[o].disclosure&&a.result.permutations[o].disclosure,n.offerApiUrl=a.result.permutations[o].serviceUrl;break}}else n.adVariantData=a.result.permutations[o].adVariationContext,n.html=a.result.permutations[o].html,n.offerKey=a.result.permutations[o].offerKey,n.lob=a.result.permutations[o].lob,n.disclosure=void 0!==a.result.permutations[o].disclosure&&a.result.permutations[o].disclosure,n.offerApiUrl=a.result.permutations[o].serviceUrl;if(t.trackVariation){var u={};u.adLabel=f.AdLabels.decisionEngine,k.Logger.debugMsg("Slot Placement - [trackAdVariation] Event Published for PID:",t.pid),b.Topic("trackAdVariation").publish(t.pid,u,n.adVariantData,t.pageId)}return n},load:function(r,t,a,n){var o=Date.now(),e={cache:!0,error:function(e,t,i){window.Blue&&window.Blue.version&&(void 0!==n&&""!==n?b.Topic("trackfailOverImpression").publish(I.adErrorTypes.content_fail,n.pageId,n.pid):b.Topic("trackfailOverImpression").publish(I.adErrorTypes.content_fail),k.Logger.logMsg("Slot Placement - [trackfailOverImpression] Event Published for URL:",r)),a(n.optionalFailover||!1),k.Logger.logErrorMsgObject(I.adErrorTypes.content_fail,{pageId:n.pageId||"",placementId:n.pid||"",cid:r,creativeId:n.creativeId||"",interactionID:n.interactionID||"",midasId:n.midas_id||"",adfTraceId:n.adf_traceid||"",responseTime:Date.now()-o,details:i||t||"--",httpStatus:e.status,httpReadyState:e.readyState})}};k.Logger.debugMsg("Slot Placement - Loading content from URL:",r),i.CORS(r,e).then(function(e){e.trim()?(k.Logger.debugMsg("Slot Placement - Content loaded successfully from URL:",r),t(e)):(k.Logger.logErrorMsgObject(I.adErrorTypes.content_fail,{pageId:n.pageId||"",placementId:n.pid||"",cid:r,creativeId:n.creativeId||"",interactionID:n.interactionID||"",midasId:n.midas_id||"",adfTraceId:n.adf_traceid||"",responseTime:Date.now()-o,details:O.adConstants.contentErrors.noData,httpStatus:O.adConstants.httpStatusOk,httpReadyState:O.adConstants.httpReadyStateOk}),a(n.optionalFailover||!1))})},is_content_json:function(e){try{return JSON.parse(e),!0}catch(e){return!1}},manageContentUrl:function(e,t){h.contentService.isCrossDomain(t)&&(e.result.en.prefixImage.includes("http")||(e.result.en.prefixImage=A+e.result.en.prefixImage),e.result.es.prefixImage.includes("http")||(e.result.es.prefixImage=A+e.result.es.prefixImage))},loadAd:function(e,a,n,o,t){var s=C.default.extend({cid:e||""},t);if("false"!==l){var i=e.substring(e.lastIndexOf("/"),e.length).split(".");if(2<i.length){for(var r="",c=1;c<i.length-1;c++)r+=i[c]+".";e=e.replace("."+r+"html","/_jcr_content/par."+r+"html")}else-1!=e.indexOf(".html")?e=e.replace(".html","/_jcr_content/adcreationcontainer/par.html"):-1!=e.indexOf(".htm")&&(e=e.replace(".htm","/_jcr_content/adcreationcontainer/par.html"))}var d=h.contentService.getContentLocation(e);-1!==e.indexOf("/services/creatives/private/native-dynamic-ads")?h.contentService.load(d,function(e){var t={trackVariation:!1};h.contentService.isCrossDomain(d)&&(e=(e=e.replace(/\"\//g,'"'+A+"/")).replace(/\'\//g,"'"+A+"/"));var i=h.contentService.evaluateDynamicAd(e,t).html.replace("${jpmcPageVar.clickThruUrl}",o);a(i)},n,s):h.contentService.load(d,function(t){t=t.replace("${jpmcPageVar.clickThruUrl}",o);var i=x.channelEnvironment.getResolvedEci();if(h.contentService.is_content_json(t)){var r=JSON.parse(t);h.contentService.isCrossDomain(d)&&(h.contentService.manageContentUrl(r,d),null!=r.result.personalizedFor&&""!=r.result.personalizedFor?C.default.when(S.personalizationService.getPersonalizationData(r.result,s)).then(function(e){x.channelEnvironment.getPersona();t=JSON.stringify(r),t=(t=h.contentService.replaceReferenceVariables(t,e,r.result.personalizedFor)).replace(/{{eci}}/g,i),null!=e&&(t=t.replace(/{{offerId}}/g,e.offerId)),a(t)},function(e){n()}):(t=(t=JSON.stringify(r)).replace(/{{eci}}/g,i),a(t)))}else h.contentService.isCrossDomain(d)&&(t=(t=t.replace(/\"\//g,'"'+A+"/")).replace(/\'\//g,"'"+A+"/")),a(t)},n,s)},loadBlueAd:function(e,l,u,f,t){function a(e){var i=e.contentLocation,t=e.data,r=e.isFailover,a=e.failoverAdObject,n=void 0===a?{}:a;h.contentService.isCrossDomain(i)&&((p=JSON.parse(t)).result.permutations[0].html=p.result.permutations[0].html.replace(/\"\//g,'"'+A+"/"),p.result.permutations[0].html=p.result.permutations[0].html.replace(/\'\//g,"'"+A+"/")),t=JSON.stringify(p),x.channelEnvironment.getPersona();var o=x.channelEnvironment.getResolvedEci(),s=h.contentService.evaluateDynamicAd(t,g),c=s.html.replace("${jpmcPageVar.clickThruUrl}",g.clickThroughUrl);if(null!=s.offerKey&&""!=s.offerKey){var d=Date.now();C.default.when(S.personalizationService.getPersonalizationData(s,g)).then(function(e,t){(c=y(c,e,s,g,o,t))?l(c,s.adVariantData,s.disclosure,r,n):(S.personalizationService.logPersonalizedError({errorType:I.adErrorTypes.data_replace_fail,errorDetails:{httpStatus:O.adConstants.httpStatusOk,httpReadyState:O.adConstants.httpReadyStateOk,details:JSON.stringify(e)},contentLocation:i,dataReqStartTime:d,adVariation:s,adParameters:f,decisionResultToUse:m}),r?u():v(I.adErrorTypes.data_replace_fail))},function(e){S.personalizationService.logPersonalizedError({errorType:I.adErrorTypes.api_data_fail,errorDetails:e,contentLocation:i,dataReqStartTime:d,adVariation:s,adParameters:f,decisionResultToUse:m}),r?u():v(I.adErrorTypes.api_data_fail)})}else c=c.replace("{{eci}}",o),l(c,s.adVariantData,s.disclosure,r,n)}var p,m=t||{},g=C.default.extend({clickThroughUrl:null,trackVariation:!0,creativeId:m.creativeId||"--",interactionID:m.interactionID||"--",midas_id:m.midas_id||"",adf_traceid:m.adf_traceid||"",cid:e||""},f),y=function(e,t,i,r,a,n){return(e=(e=(e=h.contentService.replaceReferenceVariables(e,t,i.offerKey)).replace(/{{eci}}/g,a)).replace(/{{offerId}}/g,t.offerId))&&n&&h.contentService.manageOfferDataImpression(r.pid,i.offerKey,t),e},v=function(e){g?(C.default.when(c.failoverService.getFailOverAdData(g.pageId,g)).then(function(e){var t=e[g.pid];if(t){var i=c.failoverService.createDecisionRecord(t),r=h.contentService.getContentLocation(t.failoverAdUrl);h.contentService.load(r,function(e){a({contentLocation:r,data:e,isFailover:!0,failoverAdObject:i})},u,g)}else u()}),b.Topic("trackfailOverImpression").publish(e,g.pageId,g.pid)):b.Topic("trackfailOverImpression").publish(e),k.Logger.logMsg("Slot Placement - [trackfailOverImpression] Event Published")},i=h.contentService.getContentLocation(e);if(-1!=e.indexOf(".dynamic.html"))h.contentService.load(i,function(e){h.contentService.isCrossDomain(i)&&(e=(e=e.replace(/\"\//g,'"'+A+"/")).replace(/\'\//g,"'"+A+"/")),e=e.replace("${jpmcPageVar.clickThruUrl}",g.clickThroughUrl),l(e)},u);else{Date.now();h.contentService.load(i,function(e){a({contentLocation:i,data:e,isFailover:!1})},function(){v(I.adErrorTypes.content_fail)},g)}},loadFailoverAd:function(e,i,s,r){C.default.when(c.failoverService.getFailOverAdData(e)).then(function(e){var t=e[i];if(t){var n=c.failoverService.createDecisionRecord(t),o=h.contentService.getContentLocation(t.failoverAdUrl);h.contentService.load(o,function(e){var t;h.contentService.isCrossDomain(o)&&((t=JSON.parse(e)).result.permutations[0].html=t.result.permutations[0].html.replace(/\"\//g,'"'+A+"/"),t.result.permutations[0].html=t.result.permutations[0].html.replace(/\'\//g,"'"+A+"/")),e=JSON.stringify(t);var i=x.channelEnvironment.getResolvedEci(),r=h.contentService.evaluateDynamicAd(e,{}),a=r.html.replace("{{eci}}",i);s(a,r.adVariantData,r.disclosure,!0,n)},r,{})}else r()}),k.Logger.logErrorMsgObject(I.adErrorTypes.failover_ad_load,{pageId:e,placementId:i}),k.Logger.logMsg("Slot Placement - [trackfailOverImpression] Event Published")},replaceReferenceVariables:function(e,t,i){"string"==typeof t&&(t=JSON.parse(t));var r=e.match(/{{reference-(\w+\s*.\w+)*}}/g);if(r)for(var a=0;a<r.length;a++){var n=r[a].substring(r[a].lastIndexOf("_")+1,r[a].indexOf("}}")),o=s.formatter.format(t[n],n,i);if(void 0===t[n]||null==o)return"";e=e.replace(r[a],o)}return e},getFailoverContentPaths:function(e,i,r){var a={},n={};C.default.when(c.failoverService.getFailOverAdData(e)).then(function(t){t&&0<Object.keys(t).length&&Object.keys(t).forEach(function(e){a[e]=t[e].failoverAdUrl,n[e]=t[e].failoverAdId}),0<Object.keys(a).length?i(a,n):r()},function(e){r()})},loadAdCollectionContent:function(e,n){var o=[],s={},c={},d={},l={};return null!=n.failoverAdIds&&(l=n.failoverAdIds),C.default.each(e,function(r,e){var a=new C.default.Deferred,t=h.contentService.getContentLocation(e);if(""!=e){var i=C.default.extend({clickThroughUrl:null,trackVariation:!0,pid:r},n);h.contentService.load(t,function(e){h.contentService.isCrossDomain(t)&&(e=(e=e.replace(/\"\//g,'"'+A+"/")).replace(/\'\//g,"'"+A+"/")),function(e){if(n.evaluateDynamicAd){var t=C.default.extend({clickThroughUrl:null,trackVariation:!0},n),i=h.contentService.evaluateDynamicAd(e,t);d[r]=i.adVariantData,c[r]=i.html}else c[r]=e;s.adVariationArray=d,s.contentArray=c,s.failoverAdIds=l,a.resolve(s)}(e)},function(){a.reject("Error")},i),o.push(a)}}),C.default.when.apply(void 0,o).promise()},loadAdCollection:function(e,i,r,a){var t=C.default.extend({evaluateDynamicAd:!1},a);C.default.when(h.contentService.loadAdCollectionContent(e,t)).then(function(e){i(e.contentArray,e.adVariationArray,e.failoverAdIds)},function(){h.contentService.getFailoverContentPaths(a.pageId,function(e,t){a.failoverAdIds=t,h.contentService.loadAdCollection(e,i,r,a)},function(){r()})})},loadBlueAdCollection:function(e,i,r,t){var a=C.default.extend({loadFailover:!1,evaluateDynamicAd:!0},t);if(a.loadFailover){h.contentService.getFailoverContentPaths(a.pageId,function(e,t){a.failoverAdIds=t,h.contentService.loadAdCollection(e,i,r,a)},r)}else h.contentService.loadAdCollection(e,i,r,a)}},h.default=h.contentService}),define("mktui-fx/ads/analytics/impressionErrorHelper",["require","exports","mktui-fx/util/Logger","mktui-fx/common/adConfig","mktui-fx/ads/content/content.service","mktui-fx/common/adErrorTypes"],function(e,o,s,c,d,l){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var a={};o.impressionErrorHelper={handleImpressionError:function(e,t,i,r){var a=RegExp("[?&]ssv_random=([^&]*)").exec(r.turl),n=a?decodeURIComponent(a[1].replace(/\+/g," ")):"";return!!(c.adConfig.duplicateImpressionTracking&&d.contentService.isCXOChannel()&&o.impressionErrorHelper.checkDuplicateImpression(r.interactionID,r.creativeId,n)&&(o.impressionErrorHelper.logImpressionError(l.adErrorTypes.duplicate_impression,e,t,i,r),o.impressionErrorHelper.isBPPlacement(t)))||(i.creativeId!==r.creativeId&&o.impressionErrorHelper.logImpressionError(l.adErrorTypes.creative_mismatch,e,t,i,r),!1)},logImpressionError:function(t,e,i,r,a){try{var n={midasCreativeId:a.creativeId||"--",adobeCreativeId:r.creativeId||"--",pageId:e||"--",placementId:i||"--",interactionID:a.interactionID||"--",midasId:a.midas_id||"--",adfTraceId:a.adf_traceid||"--"};setTimeout(function(){s.Logger.logErrorMsgObject(t,n)},1e3)}catch(e){s.Logger.debugMsg("Error logging impression error for type "+t,e)}},checkDuplicateImpression:function(e,t,i){if(e&&t&&i){var r=e+"|"+t+"|"+i;if(a[r])return!0;a[r]=!0}return!1},isBPPlacement:function(e){var t=c.adConfig.borrowingPowerPlacements;return e&&0<=t.indexOf(e.toLowerCase())}}}),define("mktui-fx/util/domUtils",["require","exports","slotplacement-libs/jqueryOnScreen"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=(r.prototype.invokePixelTag=function(e){document.images?(new Image).src=e:document.write('<IMG ALT="" BORDER="0" NAME="DCSIMG" WIDTH="1" HEIGHT="1" SRC="'+e+'">')},r.prototype.onScreen=function(e){return e.isOnScreen(.5,.5)},r.prototype.isElementInViewport=function(e){var t=e.parent();return!(!this.onScreen(e)||t&&null!=t.attr("aria-hidden")&&"false"!=t.attr("aria-hidden"))},r);function r(){}t.DomUtil=i,t.domUtil=new i}),define("mktui-fx/ads/analytics/reportingDecisionEngine",["require","exports","mktui-fx/util/Logger","mktui-fx/common/adErrorTypes","mktui-fx/ads/analytics/adDataStore","mktui-fx/ads/analytics/impressionErrorHelper","mktui-fx/util/domUtils","mktui-fx/common/AdLabels"],function(e,t,o,s,c,d,l,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=(r.prototype.sendClickEventToMidas=function(e,t,i,r){if(t.turl)l.domUtil.invokePixelTag(t.turl);else{var a={creativeId:t.creativeId||"--",pageId:i||"--",placementId:e||"--",midasId:r.midasId||"",interactionID:t.interactionID||"--"};o.Logger.logErrorMsgObject(s.adErrorTypes.midas_turl_missing,a)}},r.prototype.sendImpressionToDecisionEngine=function(e,t,i){void 0===t&&(t={});var r=c.adDataStore.getPageData(i)?c.adDataStore.getPlacementData(i,e):null;if(t.adLabel&&t.adLabel===u.AdLabels.defaultAd)o.Logger.debugMsg("Failover Ad. Skipping midas impression for placementId ",e);else if(r){if(!r.turl){var a={creativeId:r.creativeId||"--",pageId:i||"--",placementId:e||"--",interactionID:r.interactionID||"--"};return void o.Logger.logErrorMsgObject(s.adErrorTypes.midas_turl_missing,a)}if(!d.impressionErrorHelper.handleImpressionError(i,e,t,r)){var n=r.turl.replace("/click","/view");l.domUtil.invokePixelTag(n)}}},r);function r(){}t.ReportingDecisionEngine=i,t.reportingDecisionEngine=new i}),define("mktui-fx/ads/analytics/reportingPrivate",["require","exports","mktui-fx/ads/analytics/AnalyticsChannels","mktui-fx/util/Logger","mktui-fx/common/adConfig","mktui-fx/ads/analytics/adDataStore","mktui-fx/common/adConstants"],function(e,d,l,o,u,f,s){"use strict";Object.defineProperty(d,"__esModule",{value:!0});var t=(i.prototype.handleFailoverEvent=function(e,t,i,r,a){void 0===a&&(a={creativeId:s.adConstants.analytics.defaultAdId,midas_id:""});var n={placement:r,adId:a.creativeId,midasId:a.midas_id,tagMap:i,failoverReason:t};d.reportingPrivate.sendPayloadToAnalytics(e,n),o.Logger.debugMsg("Slot Placement - [Failover Ad Impression] Fired for pageId:",i)},i.prototype.handlePrivateAdImpression=function(e,t,i,r){var a=u.adConfig.offerDetails[e]||"",n=f.adDataStore.getPageData(r)?f.adDataStore.getPlacementData(r,e):null;if(n){var o=n.creativeId,s=n.location,c={placement:e||"",adId:t.creativeId||o||"",midasId:t.midasId||"",location:t.location||s||"",variations:i||"",tagMap:r,offerId:a};d.reportingPrivate.sendPayloadToAnalytics(l.AnalyticsChannels.impressionChannel,c)}},i.prototype.sendPayloadToAnalytics=function(t,i){window.require(["blue/event/channel/analytics"],function(e){e.emit(t,i)})},i);function i(){}d.ReportingPrivate=t,d.reportingPrivate=new t}),define("mktui-fx/util/commonUtils",["require","exports","jquery","slotplacement-libs/jqueryOnScreen"],function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i=__importDefault(i),t.debounce=function(i,r,a){var n;return void 0===r&&(r=100),void 0===a&&(a=!1),function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];n?clearTimeout(n):a&&i.apply(null,e),n=setTimeout(function(){a||i.apply(null,e),n=null},r)}},t.strictEncodeURIComponent=function(e){return encodeURIComponent(e).replace(/[!'()*]/g,escape)},t.objAssign=Object.assign||__assign||i.default.extend}),define("mktui-fx/ads/analytics/reportingPublicSite",["require","exports","mktui-fx/common/adConfig","mktui-fx/util/commonUtils","mktui-fx/ads/analytics/AnalyticsEvents","mktui-fx/util/Logger","mktui-fx/ads/analytics/adDataStore","mktui-fx/util/domUtils","mktui-fx/common/AdLabels","mktui-fx/common/adConstants","mktui-fx/ads/analytics/analyticsLiteService"],function(e,t,i,u,f,l,p,r,m,g,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=(o.prototype.handlePublicAdImpression=function(e,t,i,r){var a,n,o,s=p.adDataStore.getPageData(r)?p.adDataStore.getPlacementData(r,e):null,c=__assign({},t);if(c.adLabel===m.AdLabels.defaultAd||c.failOverAdIds?(a=c.failOverAdIds&&c.failOverAdIds[e]?c.failOverAdIds[e]:c.failoverAdId,o=c.failoverReason):s&&(a=s.creativeId||s.wa_aid,n=s.midas_id),a){var d={event:f.AnalyticsEvents.impression,wa_aid:a,pageId:r,placementId:e,midasId:n||"",adVariantData:i,failoverReason:o};this.sendBehavioralAnalytics(d),l.Logger.debugMsg("Slot Placement - [Ad Impression] Fired for PID:",e)}},o.prototype.sendClickEventToAdobe=function(e,t,i,r,a){var n=__assign({},r),o=n.adLabel===m.AdLabels.defaultAd;if(t||o){var s=n.failOverAdIds&&n.failOverAdIds[e]||n.failoverAdId,c=t?t.creativeId||t.wa_aid:s,d={event:f.AnalyticsEvents.click,wa_aid:c,pageId:i,placementId:e,midasId:t?t.midas_id:"",adVariantData:a,failoverReason:n.failoverReason};this.sendBehavioralAnalytics(d),l.Logger.debugMsg("Slot Placement - [Ad Click] Fired for PID:",e)}},o.prototype.sendBehavioralAnalytics=function(e){var t=this.createPixelUrl(e);this.sendAnalyticsToAdobeInsight(t),this.sendAnalyticsToAdobeAnalytics(t),l.Logger.debugMsg("Reporting Public - [Pixel Url] Created",t)},o.prototype.sendAnalyticsToAdobeInsight=function(e){i.adConfig.isPixelTagEnabled&&r.domUtil.invokePixelTag(e)},o.prototype.sendAnalyticsToAdobeAnalytics=function(e){i.adConfig.isAnalyticsEnabled&&a.analyticsLiteService.isAnalyticsReportingSupported()&&a.analyticsLiteService.sendImpression(e)},o.prototype.createBaseTrackingPixelUrl=function(){return i.adConfig.trackingPixelImagePath+"&wa_cb="+this.random},o.prototype.constructQueryParameters=function(t){return Object.keys(t).filter(function(e){return void 0!==t[e]&&""!==t[e]}).map(function(e){return t[e]?"&"+e+"="+t[e]:""}).join("")},o.prototype.createPixelUrl=function(e){var t,i=e.event,r=e.wa_aid,a=e.pageId,n=e.placementId,o=e.midasId,s=e.adVariantData,c=e.failoverReason,d=void 0===c?"":c,l=((t={})[i===f.AnalyticsEvents.impression?"wa_aid_i":i===f.AnalyticsEvents.click?"wa_aid_lnk":""]=r,t.jp_aid_p=a+(n?"/"+n:""),t.jp_aid_c=s||"",t.wa_tp=g.adConstants.analytics.web.adEventCode,t.wa_uri=u.strictEncodeURIComponent(document.location.href),t.wa_ad_fi=d,t.midas_id=o||"",t);return this.createBaseTrackingPixelUrl()+this.constructQueryParameters(l)},o);function o(){this.random=Math.floor(9e8*Math.random())+1e8}t.ReportingPublicSite=n,t.reportingPublicSite=new n}),define("mktui-fx/common/adEvents",["require","exports"],function(e,t){"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),(i=t.AdEvents||(t.AdEvents={})).adError="adError",i.adUpdate="adUpdate",i.adFailover="adFailover",i.adCollectionError="adCollectionError",i.adCollectionUpdate="adCollectionUpdate",i.trackfailOverImpression="trackfailOverImpression",i.trackAdImpression="trackAdImpression",i.trackfailOverClick="trackfailOverClick",i.trackAdClick="trackAdClick"}),define("mktui-fx/ads/analytics/tracking",["require","exports","mktui-fx/ads/topic","mktui-fx/common/adEvents","mktui-fx/ads/analytics/reportingPublicSite","mktui-fx/ads/analytics/reportingPrivate","mktui-fx/environment/channelEnvironment","mktui-fx/ads/analytics/reportingDecisionEngine","mktui-fx/ads/analytics/adDataStore","mktui-fx/ads/analytics/AnalyticsChannels"],function(e,t,i,r,n,a,o,s,c,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=(u.prototype.subscribeToAdEvents=function(){i.Topic.subscribe(r.AdEvents.trackAdImpression,this.handleAdImpression.bind(this)),i.Topic.subscribe(r.AdEvents.trackAdClick,this.handleAdClick.bind(this)),i.Topic.subscribe(r.AdEvents.trackfailOverImpression,function(e,t,i,r){a.reportingPrivate.handleFailoverEvent(d.AnalyticsChannels.impressionChannel,e,t,i,r)}),i.Topic.subscribe(r.AdEvents.trackfailOverClick,function(e,t,i,r){a.reportingPrivate.handleFailoverEvent(d.AnalyticsChannels.clickChannel,e,t,i,r)})},u.prototype.handleAdImpression=function(e,t,i,r){void 0===t&&(t={}),o.channelEnvironment.isCXO()?a.reportingPrivate.handlePrivateAdImpression(e,t,i,r):n.reportingPublicSite.handlePublicAdImpression(e,t,i,r),c.adDataStore.getPageData(r)&&!t.isFailoverAdContent&&s.reportingDecisionEngine.sendImpressionToDecisionEngine(e,t,r)},u.prototype.handleAdClick=function(e,t,i,r){if(void 0===t&&(t={}),c.adDataStore.getPageData(r)&&!t.isFailoverAdContent){var a=c.adDataStore.getPlacementData(r,e);a&&(s.reportingDecisionEngine.sendClickEventToMidas(e,a,r,t),o.channelEnvironment.isCXO()||n.reportingPublicSite.sendClickEventToAdobe(e,a,r,t,i))}},u);function u(){}t.AdTracking=l,t.adTracking=new l}),define("mktui-fx/ads/client/AdParameters",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),define("mktui-fx/ads/client/AdType",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),(t.AdType||(t.AdType={})).adCollection="adCollection"}),define("mktui-fx/ads/client/AdRequest",["require","exports","mktui-fx/ads/client/AdType","mktui-fx/util/commonUtils"],function(e,t,i,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=(n.prototype.isAdCollection=function(){return this.callerContext===i.AdType.adCollection},n);function n(e){this.pageId="",this.adParams={},r.objAssign(this,e)}t.AdRequest=a}),define("mktui-fx/ads/client/clientRequestHelper.service",["require","exports","jquery","mktui-fx/environment/channelEnvironment","mktui-fx/common/adConstants"],function(e,t,i,n,o){"use strict";function r(e){return e?(e+"").substr(0,5):""}function a(e){return void 0!==e&&i.default.isArray(e)?e.join(";"):e}Object.defineProperty(t,"__esModule",{value:!0}),i=__importDefault(i),t.isValidPageId=function(e){return void 0!==e},t.isValidDecisionUrl=function(e){return void 0!==e},t.processAdParameters=function(e){var t={},i=n.channelEnvironment.getPersona();return"object"==typeof e&&(t.eci=e.eci||n.channelEnvironment.getResolvedEci(),t.pfid=e.pfid||i.pfid,t.zip=r(e.zip||i.zip),t.cigseg=e.cigseg||i.segment,t.locale=e.locale||i.locale,t.product=e.product,t.userType=e.userType,t.sitebrand=e.sitebrand,t.siteacct=e.siteacct,t.pnpc=e.pnpc,t.pageLayout=e.pageLayout,t.origin=e.origin,t.products=a(e.products),t.pnpcs=a(e.pnpcs),t.lids=a(e.lids)),t},t.processZipCode=r,t.parsePageQueryParams=function(e){var a={};return e.forEach(function(e){var t=e.split("=");if(2===t.length){var i=t[0],r=t[1];a[i]=decodeURIComponent(r.replace(/\+/g," "))}}),a},t.getMultiValueParam=a,t.generateRequestTraceId=function(e){var t=o.adConstants.ssv_channel,i=o.adConstants.clientId,r=e.eci||n.channelEnvironment.getResolvedEci()||n.channelEnvironment.getVFirstId(),a=Math.floor(1e8*Math.random());return[t,i,r,Date.now(),a].join("_")}}),define("mktui-fx/ads/dso/dsolib.provider",["require","exports","jquery","mktui-fx/environment/channelEnvironment","mktui-fx/common/adConfig","mktui-fx/util/cors","mktui-fx/util/Logger"],function(e,t,i,a,n,o,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i=__importDefault(i),t.fetchDsoLibraryIds=function(){var r=i.default.Deferred(),e={enterpriseID:a.channelEnvironment.getResolvedEci()},t={url:n.adConfig.dsoOfferServiceUrl,dataType:"json",contentType:"application/json",cache:!1,data:JSON.stringify(e),timeout:n.adConfig.timeoutDSOApi,method:"POST",headers:{"x-jpmc-csrf-token":"NONE"}};return o.CORS(t).then(function(e){e.status&&"true"===e.status&&null!=e.libId&&""!=e.libId?r.resolve(e.libId):r.reject(null)},function(e,t,i){s.Logger.logDebugMsg("Error getting library ids ",t+", "+i),r.reject(null)}),r.promise()}}),define("mktui-fx/ads/decision/midas.provider",["require","exports","jquery","mktui-fx/environment/channelEnvironment","mktui-fx/common/adConfig","mktui-fx/util/cors","mktui-fx/ads/client/clientRequestHelper.service","mktui-fx/common/adConstants","mktui-fx/common/adErrorTypes","mktui-fx/util/Logger"],function(e,t,r,l,c,d,u,f,p,m){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r=__importDefault(r);var a={prefixSsv:"ssv_",prefixSsvm:"ssvm_",multiValueParam:["lids","products","pnpcs"]};function n(e){return-1<a.multiValueParam.indexOf(e)}function g(i){var r={};return Object.keys(i).forEach(function(e){var t=n(e)?a.prefixSsvm:a.prefixSsv;r[t+e]=i[e]||""}),r}t.fetchDecisionFromMidas=function(a,e){var n=r.default.Deferred(),t=g(e),o=Date.now(),s=u.generateRequestTraceId(e),i={url:c.adConfig.MIDASDecisionUrl,dataType:"json",timeout:c.adConfig.timeout,data:__assign(__assign({},t),{ssv_v1st:l.channelEnvironment.getVFirstId(),ssv_adf_traceid:s,ssv_channel:f.adConstants.ssv_channel,ssv_random:Math.floor(998*Math.random()+1),pageID:a,time:Date.now()})};return d.CORS(i).done(function(e){var t=function(e){if(e&&e.offers&&e.offers.length){for(var t={},i=0;i<e.offers.length;i++){var r=e.offers[i];t[r.placement]=r}return t}return e}(e);n.resolve(t)}).fail(function(e,t,i){var r=function(e){var t=e.pageId,i=e.adfTraceId,r=e.requestStartTime,a=e.jqXhr,n=e.textStatus,o=e.errorThrown,s="timeout"===n?p.adErrorTypes.decision_timeout_fail:p.adErrorTypes.decision_fail,c=Date.now()-r,d=(n||"")+","+(o||"");return m.Logger.logErrorMsgObject(s,{pageId:t,responseTime:c,details:d,httpStatus:a.status,httpReadyState:a.readyState,channel:l.channelEnvironment.getChannel(),adfTraceId:i}),s}({pageId:a,adfTraceId:s,requestStartTime:o,jqXhr:e,textStatus:t,errorThrown:i});n.reject(r)}),n.promise()},t._privateFunctionsMidasProvider={isMultiValueParam:n,createSsvParams:g}}),define("mktui-fx/ads/client/client.service",["require","exports","jquery","mktui-fx/common/adConfig","mktui-fx/ads/topic","mktui-fx/util/Logger","mktui-fx/common/adErrorTypes","mktui-fx/ads/analytics/tracking","mktui-fx/environment/channelEnvironment","mktui-fx/ads/client/clientRequestHelper.service","mktui-fx/ads/dso/dsolib.provider","mktui-fx/common/adEvents","mktui-fx/ads/decision/midas.provider","mktui-fx/ads/client/AdRequest","mktui-fx/ads/content/failover/failover.service","mktui-fx/ads/analytics/adDataStore"],function(e,t,a,n,s,o,c,i,d,l,u,f,p,m,g,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),a=__importDefault(a);var y={},v="";function h(t,e){var i=t.pageId,r=t.adParams;e&&(r.lids=l.getMultiValueParam(e)),o.Logger.logDebugMsg("Slot Placement - Calling midas with Page Id:",i),p.fetchDecisionFromMidas(i,r).then(function(e){return function(e,t){var i=e.pageId,r=e.callerContext;e.isAdCollection()?s.Topic(f.AdEvents.adCollectionUpdate).publish(i,t,r):s.Topic(f.AdEvents.adUpdate).publish(i,t,r);o.Logger.logMsg("Slot Placement - [adUpdate] Event Published for Page Id:",i),C(i,t)}(t,e)},function(e){return function(t,i){var e=t.pageId;t.callerContext;a.default.when(g.failoverService.getFailOverAdData(e)).then(function(e){b(t,i,e)},function(){b(t,i)}),C(e,{}),window.Blue&&window.Blue.version&&"test_cpo_secure_exploreproducts"!=e&&"cpo_secure_exploreproducts"!=e&&(o.Logger.logMsg("Slot Placement - [trackfailOverImpression] Event Published for Page Id:",e),s.Topic(f.AdEvents.trackfailOverImpression).publish(i,e))}(t,e)})}function C(e,t){r.adDataStore.addPage(e,t),o.Logger.debugMsg("Slot Placement - Registered Ad Tracker for Page Id:",e)}function b(e,t,i){var r=e.pageId,a=e.callerContext;if(!d.channelEnvironment.isCXO()){var n=e.isAdCollection()?f.AdEvents.adCollectionError:f.AdEvents.adError;s.Topic(n).publish(r,a,t)}else if(i){var o=g.failoverService.transformFailoverToDecisionResponse(i);s.Topic(f.AdEvents.adFailover).publish(r,a,t,o)}else s.Topic(f.AdEvents.adError).publish(r,a,t)}i.adTracking.subscribeToAdEvents(),t.clientService={init:function(e,t,i){if(void 0===t&&(t={}),o.Logger.logMsg("Slot Placement - Service.init() called with Page Id:",e),v=e,l.isValidPageId(e)){l.isValidDecisionUrl(n.adConfig.MIDASDecisionUrl)||function(e,t){"adCollection"!=t?(o.Logger.logErrorMsgObject(c.adErrorTypes.no_decision_url,{pageId:e}),s.Topic(f.AdEvents.adError).publish(e,t,c.adErrorTypes.no_decision_url)):(o.Logger.logErrorMsgObject(c.adErrorTypes.no_decision_url,{adErrorCollection:!0,pageId:e}),s.Topic(f.AdEvents.adCollectionError).publish(e,t,c.adErrorTypes.no_decision_url))}(n.adConfig.MIDASDecisionUrl,i);var r=l.processAdParameters(t);!function(e){var t=d.channelEnvironment.getPersona();n.adConfig.eci=e.eci||d.channelEnvironment.getResolvedEci(),n.adConfig.pfid=t.pfid||""}(r);var a=new m.AdRequest({pageId:e,adParams:r,callerContext:i});t.DSO_flag?u.fetchDsoLibraryIds().always(function(e){return h(a,e)}):h(a)}else!function(e){"adCollection"!=e?o.Logger.logErrorMsgObject(c.adErrorTypes.no_page_id,{pageId:"--"}):o.Logger.logErrorMsgObject(c.adErrorTypes.no_page_id,{adErrorCollection:!0,pageId:"--"})}(i)},destroy:function(e){if(""!==v&&v===e){o.Logger.logMsg("Slot Placement - Destroying Page Id:",e),v="";var i=[];a.default.each(y,function(e,t){i.push(t)}),function(i){i=[];for(var e=0;e<arguments.length;e++)"string"==typeof arguments[e]?i.push(arguments[e]):a.default.isArray(arguments[e])&&a.default.each(arguments[e],function(e,t){i.push(t)});a.default.each(i,function(e,t){void 0!==y[t]&&(o.Logger.debugMsg("Slot Placement - Destroying Event Handlers for Placement:",t),a.default("#"+t).children().off(".slotplacement"),y[t]=null,delete y[t])})}(i),function(e){o.Logger.debugMsg("Slot Placement - Destroying Ad Tracker for Page Id:",e),r.adDataStore.addPage(e,{})}(e),a.default.each(s.Topic.channels,function(e,t){o.Logger.debugMsg("Slot Placement - Destroying Topic Channel:",t.name),s.Topic.channels[e]=null,delete s.Topic.channels[e]})}},registerPlacement:function(e){void 0===y[e]&&(y[e]=e)}}}),define("mktui-fx/ads/personalization/dataSettings.interface",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),define("mktui-fx/ads/personalization/offerResponse.interface",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),define("mktui-fx/ads/placement/Spinner",["require","exports"],function(e,t){"use strict";var i,r;Object.defineProperty(t,"__esModule",{value:!0}),(r=i=t.SpinnerType||(t.SpinnerType={})).placementSpinner="placement-spinner",r.overlaySpinner="overlay-spinner",r.spinner="spinner";var a=(n.prototype.show=function(e){if(e.options.loadingView.toLowerCase()===i.placementSpinner)e.element.css({position:"relative"}),e.element.append("<div class='jpui spinner'/>");else if(e.options.loadingView.toLowerCase()===i.overlaySpinner)e.element.append("<div class='jpui spinner'/>");else{if(e.options.loadingView.toLowerCase()!==i.spinner)return;!0===e.options.responsive?e.element.css({background:'url("'+this.loadingImagePath+'") no-repeat scroll center center',border:"1px solid #D5DCE2",opacity:"0.75",overflow:"hidden",display:"block","min-height":"60px"}):e.element.css({background:'url("'+this.loadingImagePath+'") no-repeat scroll center center',border:"1px solid #D5DCE2",opacity:"0.75",overflow:"hidden",display:"block",width:e.width,height:e.height})}},n.prototype.hide=function(e){if(e.options.loadingView.toLowerCase()===i.placementSpinner)e.element.removeAttr("style"),e.element.find(".jpui.spinner").remove();else if(e.options.loadingView.toLowerCase()===i.overlaySpinner)e.element.find(".jpui.spinner").remove();else{if(e.options.loadingView.toLowerCase()!==i.spinner)return;!0===e.options.responsive?e.element.css({background:"none",opacity:"1",border:"none",display:"block",overflow:"visible"}):e.element.css({background:"none",opacity:"1",border:"none",display:"block",width:e.width,height:e.height,overflow:"visible"})}},n);function n(e){this.loadingImagePath=e}t.Spinner=a}),define("mktui-fx/common/adSizes",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.adSizes={"iab-pop-medrec":{width:300,height:250},"iab-pop-wideskyscraper":{width:160,height:600},"iab-pop-leaderboard":{width:728,height:90},"iab-pop-halfpage":{width:300,height:600},"iab-large-portrait":{width:300,height:1050},"iab-large-billboard":{width:970,height:250},"iab-small-rectangle":{width:180,height:150},"iab-small-button1":{width:120,height:90},"iab-small-button2":{width:120,height:60},"iab-small-microbar":{width:88,height:31},"pb-tile":{width:250,height:65},"pb-tile1":{width:232,height:100},"pb-tile2":{width:232,height:200},"pb-medrec":{width:226,height:157},"pb-halfpage":{width:720,height:360},"cig-navad":{width:155,height:90},"cig-banner":{width:379,height:75},"cig-widebanner":{width:530,height:75},"cig-tout":{width:46,height:88},"cig-halfpage":{width:720,height:700},"cig-marque":{width:572,height:150},"cig-masthead":{width:680,height:287},"cig-carousel":{width:867,height:200},"cig-smallmarquee":{width:350,height:150},"cig-hero-marquee":{width:600,height:250},banw:{width:575,height:350},ban:{width:375,height:35},rtnv1:{width:155,height:90},rtnv2:{width:155,height:90},nvann:{width:155,height:90},interstitial:{width:833,height:380},ur_primary_bnr:{width:894,height:392},ur_dual_bnr:{width:440,height:205},ur_quad_bnr:{width:219,height:195},ur_footer_bnr:{width:468,height:215},"ur-hero-main":{width:716,height:300},"ur-hero-travel":{width:650,height:325},"ur-tile-travel":{width:345,height:204},"pb-tile3":{width:474,height:200},"ur-tile-mobile":{width:575,height:223},"cig-hero-marquee2":{width:960,height:250},"cig-hero-marquee3":{width:930,height:490}}}),define("mktui-fx/ads/placement/popupSizes",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={small:{width:200,height:200},medium:{width:980,height:600},large:{width:1006,height:600}};t.getPopupWindowSize=function(e){var t=i;return t[e]?"width="+t[e].width+", height="+t[e].height+",toolbar=no,location=no,directories=no,status=no,menubar=no,scrollbars=yes,resizable=yes":""}}),define("mktui-fx/ads/placement/placement",["require","exports","jquery","mktui-fx/common/adConfig","mktui-fx/ads/content/content.service","mktui-fx/util/Logger","mktui-fx/ads/topic","mktui-fx/common/adSizes","mktui-fx/ads/client/clientRequestHelper.service","mktui-fx/ads/placement/Spinner","mktui-fx/util/commonUtils","mktui-fx/util/domUtils","mktui-fx/ads/placement/popupSizes","mktui-fx/common/adEvents","mktui-fx/ads/client/AdType","mktui-fx/ads/content/failover/failover.service","mktui-fx/common/AdLabels","mktui-fx/common/adErrorTypes","slotplacement-libs/jqueryOnScreen"],function(e,t,C,a,v,b,k,i,r,n,o,s,I,O,c,d,x,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),C=__importDefault(C);function u(e){var h=this;this.width=0,this.height=0,this.parentSpinnerObject={},this.pageId=null,this.validateInput=function(){return!(0==h.width||0==h.height)},this.setParentSpinnerObject=function(e){var t=h.parentSpinnerObject;t.options={loadingView:h.arguments.loadingView,responsive:h.arguments.responsive};var i=C.default("#"+e).parent().parent();return t.element=i,t},this.getParentSpinnerObject=function(){return h.parentSpinnerObject},this.getAdCollection=function(e,r,t){h.pageId=t;var i={},a={},n=!1;a.pageId=t;for(var o=h,s=function(e,t,i){null!=i&&(r.failoverAdIds=i),o.renderAdCollection(r,e)},c=function(){h.spinner.hide(h.getParentSpinnerObject())},d=0;d<e.pids.length;d++){if(h.element=C.default("#"+e.pids[d]),b.Logger.debugMsg("Slot Placement - [adCollectionUpdate] Event Received for PID:",e.pids[d]),void 0===r[e.pids[d]]){b.Logger.logMsg("Slot Placement - [adCollectionUpdateError] RF response does not match for this placement: ",e.pids[d]),h.spinner.hide(h.getParentSpinnerObject()),n=!0;break}if(""==r[e.pids[d]].cid){b.Logger.logMsg("Slot Placement - [adCollectionUpdateError] RF response has empty cid for this placement: ",e.pids[d]),n=!0,v.contentService.getFailoverContentPaths(t,function(e,t){a.failoverAdIds=t,v.contentService.loadAdCollection(e,s,c,a)},function(){o.spinner.hide(o.getParentSpinnerObject())});break}i[e.pids[d]]=r[e.pids[d]].cid}n||v.contentService.loadAdCollection(i,s,c,a)},this.initializePlacement=function(e){if(h.options=__assign(__assign({},f),e),h.width=i.adSizes[e.size]?i.adSizes[e.size].width:0,h.height=i.adSizes[e.size]?i.adSizes[e.size].height:0,h.pidData={},h.adVariantData={},h.adLabel=x.AdLabels.decisionEngine,h.spinnerObject={},null!=h.options.pid)b.Logger.logMsg("Slot Placement - Configuring new Slot Placement for PID:",h.options.pid),h.element=C.default("#"+h.options.pid),h.spinnerObject=h;else{if(!(null!=h.options.pids&&0<h.options.pids.length))return b.Logger.logMsg("Slot Placement - [InitializePlacementError] Invalid API call - pid or pids must be passed"),!1;b.Logger.logMsg("Slot Placement - Configuring new Slot Placement for an array of PID's:",h.options.pids),h.spinnerObject=h.setParentSpinnerObject(h.options.pids[0])}if(h.spinner.show(h.spinnerObject),!h.validateInput()&&!h.options.responsive)return!1;h.options.isDisabled?h.spinner.hide(h.spinnerObject):(k.Topic.subscribe(O.AdEvents.adUpdate,h.handleAdUpdate),k.Topic.subscribe(O.AdEvents.adError,h.handleAdError),k.Topic.subscribe(O.AdEvents.adCollectionUpdate,h.handleAdCollectionUpdate),k.Topic.subscribe(O.AdEvents.adCollectionError,h.handleAdCollectionError))},this.handleAdUpdate=function(e,t,i){null!=h.options.pid&&"adCollection"!=i&&(b.Logger.debugMsg("Slot Placement - [adUpdate] Event Received for PID:",h.options.pid),h.pageId=e,null==t[h.options.pid]?(h.options.failoverReason="plc_config_fail",h.adDataFail({}),b.Logger.logErrorMsgObject(l.adErrorTypes.plc_config_fail,{placementId:h.options.pid||"",currentPlacements:Object.keys(t)})):t[h.options.pid].cid?(h.pidData=t[h.options.pid],h.getAd(h.pidData)):(h.pidData=t[h.options.pid],"hide"===h.options.failoverTreatment?(h.spinner.hide(h),h.element.hide()):h.adDataFail(h.pidData)))},this.handleAdError=function(e,t,i){null!=h.options.pid&&"adCollection"!=t&&null==h.options.pids&&(h.pageId=e,h.options.failoverReason=i,b.Logger.debugMsg("Slot Placement - [adFailover] Event Received for PID:",h.options.pid),h.adDataFail({}))},this.handleAdCollectionError=function(e,t,i){if(null!=h.options.pids&&0<h.options.pids.length&&"adCollection"==t&&h.options.pageId===e){h.pageId=e,h.options.failoverReason=i;var r={},a={};a.pageId=e;var n=h,o=function(e,t,i){null!=i&&(r.failoverAdIds=i),n.renderAdCollection(r,e)},s=function(){h.spinner.hide(h.getParentSpinnerObject())};b.Logger.debugMsg("Slot Placement - [adCollectionError] Event Received for an array of placement ID's:",h.options.pids),v.contentService.getFailoverContentPaths(h.options.pageId,function(e,t){a.failoverAdIds=t,v.contentService.loadAdCollection(e,o,s,a)},s)}},this.handleAdCollectionUpdate=function(e,t,i){if(null!=h.options.pids&&0<h.options.pids.length&&i===c.AdType.adCollection){if(b.Logger.debugMsg("Slot Placement - [adCollectionUpdate] Event Received for an array of placement ID's:",h.options.pids),void 0===h.options.pageId)return k.Topic(O.AdEvents.adCollectionError).publish("error","","Page Id not defined"),void b.Logger.logErrorMsgObject("no-page-id",{adErrorCollectionUpdate:!0,pageId:"--"});h.options.pageId==e&&h.getAdCollection(h.options,t,e)}},this.spinner=new n.Spinner(a.adConfig.loadingImagePath),this.loadImage=function(e){var t=document.createElement("img");t.border=0;var i=h;t.onerror=function(){t.onload=null,clearTimeout(r),i.options.failoverReason="content_fail",i.adDataFail(e)},t.onload=function(){clearTimeout(r),t.onload=null,i.render(e,t)};var r=setTimeout(t.onerror,a.adConfig.timeout);t.src=a.adConfig.contentServer+e.cid},this.getAd=function(e,t,i){var r={};r.optionalFailover=i||"",e.ctype&&(e.ctype=e.ctype.toLowerCase());var a=h,n=!(!e.url||""===e.url),o=!(!e.turl||""===e.turl),s=!!e.wa_aid,c=h.adLabel===x.AdLabels.decisionEngine;if(n&&o&&s&&c&&-1==e.url.attr("href").lastIndexOf("jp_aid_a")&&(e.url=h.track(e.url,"jp_aid_a",e.creativeId||e.wa_aid)),e.queryPassForward){var d=window.location.search.substr(1),l=/^[0-9a-zA-Z,;_-]+$/,u=e.url,f=u.match(/\?/)?"&":"?";if(""!==d&&0<d.length){d=d.split("&");for(var p={},m=0;m<d.length;m++){var g=d[m].indexOf("=");l.test(d[m].substring(0,g))&&l.test(d[m].substring(g+1,d[m].length))&&(p[d[m].substring(0,g)]=d[m].substring(g,d[m].length))}if(""!=S&&null!=S){var y=S.split(",");for(m=0;m<y.length;m++)null!=A[y[m]]&&delete p[y[m]]}for(var g in p)u=u+f+g+p[g],"?"===f&&(f="&")}e.url=u}"image"!==e.ctype||h.adLabel!==x.AdLabels.decisionEngine?(b.Logger.debugMsg("Slot Placement - Loading content with CID:",e.cid),v.contentService.loadAd(e.cid,function(){a.options.failoverAdIdApi&&a.options.failoverAdUrlApi&&(a.options.failoverAdId=a.options.failoverAdIdApi,a.options.failoverAdUrl=a.options.failoverAdUrlApi),a.render(a.pidData,arguments)},function(e){a.options.failoverReason="content_fail",e?(a.spinner.hide(a),"hide"===a.options.failoverTreatment&&a.element.hide()):a.adDataFail(a.pidData)},e.url,r)):h.loadImage(e)},this.track=function(e,t,i,r){var a=e.match(/\?/)?"&":"?";return e+=a+t+"="+i,r=null!=h.options.pid?h.options.pid:r,e+="&jp_aid_p="+h.pageId+"/"+r,h[t]=i,e},this.invokeClientConfigAdFailure=function(){var e=new Array,t=h;""!=t.options.failoverAdUrl?(t.adLabel=x.AdLabels.defaultAd,t.options.adLabel=x.AdLabels.defaultAd,e.cid=t.options.failoverAdUrl,e.turl=null,e.url=null,t.getAd(e,t.element,!0)):(t.spinner.hide(t),"hide"===t.options.failoverTreatment&&t.element.hide())},this.adDataFail=function(i){var r=h;C.default.when(d.failoverService.getFailOverAdData(""+h.pageId,i)).then(function(e){if((r.failOverAdData=e)&&e[r.options.pid]){var t=e[r.options.pid];r.options.failoverAdUrlApi=t.failoverAdUrl,r.options.failoverAdIdApi=t.failoverAdId}r.options.failoverAdUrlApi?(r.adLabel=x.AdLabels.defaultAd,r.options.adLabel=x.AdLabels.defaultAd,i.cid=r.options.failoverAdUrlApi,i.turl=null,i.url=null,r.getAd(i,r.element,!0)):(r.spinner.hide(r),"hide"===r.options.failoverTreatment&&r.element.hide())},function(e){r.invokeClientConfigAdFailure()})},this.renderAdCollection=function(a,e){var n=h;C.default.each(e,function(e,t){var i={};null!=a.failoverAdIds&&Object.keys(a.failoverAdIds).length?(n.options.failOverAdIds=a.failoverAdIds,i.pid=e,i.ctype="html",i.failover=!0):0<Object.keys(a).length&&((i=a[e]).pid=e,null!=a[e].ctype&&""!=a[e].ctype||(i.ctype="html"));var r=new Array;n.element=C.default("#"+e),r[0]=t,n.render(i,r)}),h.spinner.hide(n.getParentSpinnerObject()),k.Topic("adCarouselRendered").publish("success",n.pageId)},this.render=function(r,e){var o=r.url,t=(r.turl,r.alttext||""),i=r.target&&r.target.toLowerCase()||"",s=h.adLabel==x.AdLabels.decisionEngine;r.failover&&(s=!1);var a,n="image"==r.ctype&&s,c="html"==r.ctype,d="window"==i,l=r.targetsize&&I.getPopupWindowSize(r.targetsize)||"",u=(r.data,h.element),f=n?"append":"html";h.options.creativeId=r.creativeId,a=n?(e.setAttribute("alt",t),C.default("<a/>").attr("href",o).attr("target",i).attr("style","display:block;line-height:12px;").append(e)):e[0];var p=h,m=a;function g(e){C.default(window);var t=e.currentTarget.href,i=t.substr(t.lastIndexOf("jp_aid_p")),r=i.substr(i.lastIndexOf("/")+1),a=h;null!=a.options.failOverAdIds&&0<Object.keys(a.options.failOverAdIds).length?a.options.adLabel=x.AdLabels.defaultAd:a.options.adLabel=a.adLabel,k.Topic("trackAdClick").publish(r,a.options,a.adVariantData,a.pageId),b.Logger.debugMsg("Slot Placement - [trackAdClick] Event Published for PID:",r),d&&(window.open(e.currentTarget.href,"popup",l),e.preventDefault())}function y(e,t,i){var r=e.find("a");if(!s&&r.attr("href")&&-1==r.attr("href").lastIndexOf("jp_aid_a")){var a="";a=null!=p.options.failOverAdIds&&null!=p.options.failOverAdIds[t]?p.options.failOverAdIds[t]:p.options.failoverAdId,r.attr("href",p.track(r.attr("href"),"jp_aid_a",a,t))}s&&r.attr("href")&&c&&-1==r.attr("href").lastIndexOf("jp_aid_a")&&(r.attr("href",p.track(r.attr("href"),"jp_aid_a",i.creativeId||i.wa_aid,t)),o=r.attr("href"));var n=p.options.weblinkClickHandler;n&&"function"==typeof n&&r.on("click.slotplacement",n),r.on("click.slotplacement",g)}function v(e,t,i){if(h.options.pid=e,"adCollection"==t)!function(i,r){var e=document.querySelectorAll("[data-pt-id="+i+"]");if(0<e.length)e.forEach(function(e){var t=C.default(e);y(t,i,r)});else{var t=C.default("div #"+i);y(t,i,r)}}(e,i);else{var r=h.element;y(r,e,i)}}u[f](m),k.Topic.subscribe("placementComplete",function(e,t,i){"adCollection"===i?r.pid==e&&(b.Logger.debugMsg("Slot Placement - [placementComplete] Event Received for PID:",e),p.adVariantData=t,p.invokeAdImpression(e,r),v(e,"adCollection",r),p.options.adLabel=p.adLabel):null!=p.options.pid&&null==p.options.pids&&e===p.options.pid&&(b.Logger.debugMsg("Slot Placement - [placementComplete] Event Received for PID:",e),p.adVariantData=t,p.invokeAdImpression(e),v(e,"ad",r),p.options.adLabel=p.adLabel)}),p.options.responsive||(k.Topic(O.AdEvents.trackAdImpression).publish(p.options.pid,p.options,null,p.pageId),b.Logger.debugMsg("Slot Placement - [trackAdImpression] Event Published for PID:",p.options.pid),v(p.options.pid,"ad",r)),null!=p.options.pid&&h.spinner.hide(h)},this.invokeAdImpression=function(e,t){var i=C.default(window),r=C.default("#"+e),a=h;r&&(s.domUtil.isElementInViewport(r)&&(r.hasClass("adimpression")||(t&&(a.options.creativeId=t.creativeId,a.options.location=t.location),k.Topic(O.AdEvents.trackAdImpression).publish(e,a.options,a.adVariantData,a.pageId),b.Logger.debugMsg("Slot Placement - [trackAdImpression] Event Published for PID:",e),r.addClass("adimpression"))),r.hasClass("adimpression")||(i.on("scroll",o.debounce(function(){i.scrollTop(),s.domUtil.isElementInViewport(r)&&(r.hasClass("adimpression")||(k.Topic(O.AdEvents.trackAdImpression).publish(e,a.options,a.adVariantData,a.pageId),b.Logger.debugMsg("Slot Placement - [trackAdImpression] Event Published for PID:",e),r.addClass("adimpression")))},1e3)),i.on("click",o.debounce(function(){var e;if(s.domUtil.isElementInViewport(r)&&!r.hasClass("adimpression")){if(k.Topic(O.AdEvents.trackAdImpression).publish(r.attr("id"),a.options,a.adVariantData,a.pageId),b.Logger.debugMsg("Slot Placement - [trackAdImpression] Event Published for PID:",r.attr("id")),r.addClass("adimpression"),0<(e=document.querySelectorAll('[data-pt-id="'+r.attr("id")+'"]')).length)for(var t=0;t<e.length;t++)s.domUtil.isElementInViewport(C.default(e[t]))&&C.default(e[t]).addClass("adimpression")}else if(0<(e=document.querySelectorAll('[data-pt-id="'+r.attr("id")+'"]')).length)for(t=0;t<e.length;t++)s.domUtil.isElementInViewport(C.default(e[t]))&&!C.default(e[t]).hasClass("adimpression")&&(k.Topic(O.AdEvents.trackAdImpression).publish(r.attr("id"),a.options,a.adVariantData,a.pageId),b.Logger.debugMsg("Slot Placement - [trackAdImpression] Event Published for PID:",r.attr("id")),r.addClass("adimpression"),C.default(e[t]).addClass("adimpression"))},1e3))))},this.arguments=__assign(__assign({},f),e),this.arguments.pid&&(this.element=C.default("#"+this.arguments.pid)),this.initializePlacement(e)}var S=a.adConfig.excludedQueryPassforwardParams,A=r.parsePageQueryParams(window.location.search.substr(1).split("&")),f={size:null,failoverTreatment:"hide",failoverAdId:"",failoverAdUrl:"",loadingView:"placement-spinner",responsive:!0};t.Slot=u}),define("mktui-fx/cardlytics/CardlyticsCache",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=(r.prototype.setStorage=function(e,t,i){i?(this.cardlyticsStorage[i]=this.cardlyticsStorage[i]||{},this.cardlyticsStorage[i][e]=t):this.cardlyticsStorage[e]=t},r.prototype.getStorage=function(e,t){return t?this.cardlyticsStorage[t]&&this.cardlyticsStorage[t][e]||null:this.cardlyticsStorage[e]||null},r.prototype.isCardlyticsStorageExists=function(e,t){return null!=this.getStorage(e,t)&&"CustomerNotFoundException"!=this.getStorage(e,t)},r);function r(){this.cardlyticsStorage={}}t.CardlyticsCache=i,t.cardlyticsCache=new i}),define("mktui-fx/cardlytics/CardlyticsOfferState",["require","exports"],function(e,t){"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),(i=t.CardlyticsOfferState||(t.CardlyticsOfferState={})).NotActivated="NotActivated",i.Activated="Activated",i.redeemed="redeemed",i.expired="expired",i.available="available"}),define("mktui-fx/cardlytics/cardlyticsConstants",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.cardlyticsConstants={errors:{CustomerNotFoundException:"CustomerNotFoundException",ChaseOfferNotAvailable:"Chase Offers is not available",SourceCustomerIdNotAvailable:"Source customer Id is un available for this account",ResponseFormatError:"Response is not as per the expected format",UserNotEligible:"User is not eligible for Cardlytics",SourceCustomerIdApiFailure:"sourceCustomerId API failure",SecurityTokenAPiFailure:"securityToken API failure"},cardlyticsApiNames:{hash:"Hash_Api",secToken:"SecurityToken_Api",getOfferCountDetail:"GetOfferCountDetail_Api",getSession:"getSession_Api",getOffers:"getOffers_Api"},dashboardAccountId:"dashboardAccountId",sourceCustomerId:"sourceCustomerId",securityToken:"securityToken",cardlyticsLocation:"cardlyticsLocation",offerCount:"offerCount",offerList:"offerList",IsOptedIn:"IsOptedIn",extraData:"Chase Cardlytics",offerState:"offerState",availableDisplayType:"Offer",redeemedDisplayType:"Redemption",expiredDisplayType:"Offer Cannot Activate",cardlyticsExtraData:"Chase Cardlytics",topicCardlyticsOfferList:"cardlyticsOfferList",limitNumberOfOffersCustom:"Custom",limitNumberOfOffersAll:"All",maxOffersSlideIn:2,enableSuppressionFalse:!1,maxOffersDashboard:6,maxOffersAllOffers:0,displayofferKeyOffers:"DisplayOffers",displayofferKeyRedemption:"Redemptions",displayofferKeyExpired:"ExpiredOffers",carouselCTA:"Add to card",slideInCTA:"+ Add to card"}}),define("mktui-fx/cardlytics/cardlyticsconfig",["require","exports","jquery","slotplacement/clientconfig","slotplacement/slotplacementconfig"],function(e,t,i,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i=__importDefault(i),r=__importDefault(r),a=__importDefault(a),t.cardlyticsConfig={dpsHashApiUrl:i.default.isEmptyObject(r.default)||void 0===r.default.dpsHashApiUrl?a.default.dpsHashApiUrl:r.default.dpsHashApiUrl,timeOutDsoHashApi:i.default.isEmptyObject(r.default)||void 0===r.default.timeOutDsoHashApi?a.default.timeOutDsoHashApi:r.default.timeOutDsoHashApi,timeOutCardlyticsApi:i.default.isEmptyObject(r.default)||void 0===r.default.timeOutCardlyticsApi?a.default.timeOutCardlyticsApi:r.default.timeOutCardlyticsApi,cardlyticsServiceUrl:i.default.isEmptyObject(r.default)||void 0===r.default.cardlyticsServiceUrl?a.default.cardlyticsServiceUrl:r.default.cardlyticsServiceUrl,cardlyticsChannel:i.default.isEmptyObject(r.default)||void 0===r.default.cardlyticsChannel?a.default.cardlyticsChannel:r.default.cardlyticsChannel,cardlyticsDisplayType:i.default.isEmptyObject(r.default)||void 0===r.default.cardlyticsDisplayType?a.default.cardlyticsDisplayType:r.default.cardlyticsDisplayType,cardlyticsTranasctionId:i.default.isEmptyObject(r.default)||void 0===r.default.cardlyticsTranasctionId?a.default.cardlyticsTranasctionId:r.default.cardlyticsTranasctionId,cardlyticsOfferCountLevel:i.default.isEmptyObject(r.default)||void 0===r.default.cardlyticsOfferCountLevel?a.default.cardlyticsOfferCountLevel:r.default.cardlyticsOfferCountLevel,cardlyticsMaxOffers:i.default.isEmptyObject(r.default)||void 0===r.default.cardlyticsMaxOffers?a.default.cardlyticsMaxOffers:r.default.cardlyticsMaxOffers,cardlyticsRedemeptionLookback:i.default.isEmptyObject(r.default)||void 0===r.default.cardlyticsRedemeptionLookback?a.default.cardlyticsRedemeptionLookback:r.default.cardlyticsRedemeptionLookback,cardlyticsExpiredLookback:i.default.isEmptyObject(r.default)||void 0===r.default.cardlyticsExpiredLookback?a.default.cardlyticsExpiredLookback:r.default.cardlyticsExpiredLookback,cardlyticsOfferTileTemplateUrlEN:i.default.isEmptyObject(r.default)||void 0===r.default.cardlyticsOfferTileTemplateUrlEN?a.default.cardlyticsOfferTileTemplateUrlEN:r.default.cardlyticsOfferTileTemplateUrlEN,cardlyticsOfferTileTemplateUrlES:i.default.isEmptyObject(r.default)||void 0===r.default.cardlyticsOfferTileTemplateUrlES?a.default.cardlyticsOfferTileTemplateUrlES:r.default.cardlyticsOfferTileTemplateUrlES,cardlyticsOfferDetailTemplateUrlEN:i.default.isEmptyObject(r.default)||void 0===r.default.cardlyticsOfferDetailTemplateUrlEN?a.default.cardlyticsOfferDetailTemplateUrlEN:r.default.cardlyticsOfferDetailTemplateUrlEN,cardlyticsOfferDetailTemplateUrlEs:i.default.isEmptyObject(r.default)||void 0===r.default.cardlyticsOfferDetailTemplateUrlEs?a.default.cardlyticsOfferDetailTemplateUrlEs:r.default.cardlyticsOfferDetailTemplateUrlEs,cardlyticsImageHost:i.default.isEmptyObject(r.default)||void 0===r.default.cardlyticsImageHost?a.default.cardlyticsImageHost:r.default.cardlyticsImageHost,contentServer:i.default.isEmptyObject(r.default)||void 0===r.default.contentServer?a.default.contentServer:r.default.contentServer,marketingCxoAdsUi:i.default.isEmptyObject(r.default)||void 0===r.default.marketingCxoAdsUi?a.default.marketingCxoAdsUi:r.default.marketingCxoAdsUi,cardlyticsDisplayTypeOffer:i.default.isEmptyObject(r.default)||void 0===r.default.cardlyticsDisplayTypeOffer?a.default.cardlyticsDisplayTypeOffer:r.default.cardlyticsDisplayTypeOffer,cardlyticsDisplayTypeOther:i.default.isEmptyObject(r.default)||void 0===r.default.cardlyticsDisplayTypeOther?a.default.cardlyticsDisplayTypeOther:r.default.cardlyticsDisplayTypeOther,cardlyticsRedemeptionLookbackAvailable:i.default.isEmptyObject(r.default)||void 0===r.default.cardlyticsRedemeptionLookbackAvailable?a.default.cardlyticsRedemeptionLookbackAvailable:r.default.cardlyticsRedemeptionLookbackAvailable,cardlyticsExpiredLookbackAvailable:i.default.isEmptyObject(r.default)||void 0===r.default.cardlyticsExpiredLookbackAvailable?a.default.cardlyticsExpiredLookbackAvailable:r.default.cardlyticsExpiredLookbackAvailable,cardlyticsRedemeptionLookbackRedeemed:i.default.isEmptyObject(r.default)||void 0===r.default.cardlyticsRedemeptionLookbackRedeemed?a.default.cardlyticsRedemeptionLookbackRedeemed:r.default.cardlyticsRedemeptionLookbackRedeemed,cardlyticsExpiredLookbackRedeemed:i.default.isEmptyObject(r.default)||void 0===r.default.cardlyticsExpiredLookbackRedeemed?a.default.cardlyticsExpiredLookbackRedeemed:r.default.cardlyticsExpiredLookbackRedeemed,cardlyticsRedemeptionLookbackExpired:i.default.isEmptyObject(r.default)||void 0===r.default.cardlyticsRedemeptionLookbackExpired?a.default.cardlyticsRedemeptionLookbackExpired:r.default.cardlyticsRedemeptionLookbackExpired,cardlyticsExpiredLookbackExpired:i.default.isEmptyObject(r.default)||void 0===r.default.cardlyticsExpiredLookbackExpired?a.default.cardlyticsExpiredLookbackExpired:r.default.cardlyticsExpiredLookbackExpired,cardlyticsRedemeptionLookbackGetCount:i.default.isEmptyObject(r.default)||void 0===r.default.cardlyticsRedemeptionLookbackGetCount?a.default.cardlyticsRedemeptionLookbackGetCount:r.default.cardlyticsRedemeptionLookbackGetCount,cardlyticsExpiredLookbackGetCount:i.default.isEmptyObject(r.default)||void 0===r.default.cardlyticsExpiredLookbackGetCount?a.default.cardlyticsExpiredLookbackGetCount:r.default.cardlyticsExpiredLookbackGetCount,showExpiredState:i.default.isEmptyObject(r.default)||void 0===r.default.showExpiredState?a.default.showExpiredState:r.default.showExpiredState,isLogCardlyticsError:i.default.isEmptyObject(r.default)||void 0===r.default.isLogCardlyticsError?a.default.isLogCardlyticsError:r.default.isLogCardlyticsError,ovdTagMapCode:["cxo_account_dashboard","test_cxo_account_dashboard","test_cbo_overview_executive","cbo_overview_executive","test_jpo_summary","jpo_summary"],classicDashboardTagMapCode:["cpo_dashboard_retail","test_cpodashboard_retail","cpo_dashboard_card","test_cpodashboard_card","test_cbo_dashboard_retail","cbo_dashboard_retail"],offerDetailsTagMapCode:["cxo_cdlx_offer_details","test_cxo_cdlx_offer_details"],seeAllOffersTagMapCode:["cxo_cdlx_rewards_summary","test_cxo_cdlx_rewards_summary"],cardlyticsOfferState:{0:"none",1:"Not Activated",2:"Activated",3:"Redeemed",4:"Expired",5:"Parked"},cardlyticsMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],cardlyticslocation:{ovd:11,dashboard:8,"ovd-singlepage":11,"dashboard-singlepage":8,alloffers:7,"debit-widget":12,"credit-widget":13,CHK:12,DDA:12,PPA:12,PPX:12,PPG:12,BAC:13,OLM:13,PAC:13,BCC:13}}}),define("mktui-fx/cardlytics/cardlyticsapi",["require","exports","mktui-fx/cardlytics/cardlyticsconfig","mktui-fx/util/cors","mktui-fx/util/Logger","mktui-fx/common/adErrorTypes","mktui-fx/cardlytics/cardlyticsConstants"],function(e,c,d,l,o,s,u){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.cardlyticsAPI={getSourceCustomerIdAPI:function(r,i,a){var e={};e.accountid=r,e=JSON.stringify(e);var t={url:d.cardlyticsConfig.dpsHashApiUrl,dataType:"json",contentType:"application/json",timeout:d.cardlyticsConfig.timeOutDsoHashApi,method:"POST",data:e,headers:{"x-jpmc-csrf-token":"NONE"},error:function(e,t,i){c.cardlyticsAPI.logCardlyticsError(e,r,u.cardlyticsConstants.cardlyticsApiNames.hash),a()}};l.CORS(t).then(function(e){if(e.success&&void 0!==e.result.sourceCustomerId)i(e.result.sourceCustomerId);else{var t={responseText:u.cardlyticsConstants.errors.SourceCustomerIdNotAvailable};c.cardlyticsAPI.logCardlyticsError(t,r,u.cardlyticsConstants.cardlyticsApiNames.hash,e),a()}})},getSecurityTokenAPI:function(r,i,a){var e={};e.SourceCustomerId=r,e=JSON.stringify(e);var t={url:d.cardlyticsConfig.cardlyticsServiceUrl+"/SecurityService.asmx/GetSecurityToken",dataType:"json",contentType:"application/json",timeout:d.cardlyticsConfig.timeOutCardlyticsApi,method:"POST",data:e,error:function(e,t,i){c.cardlyticsAPI.logCardlyticsError(e,r,u.cardlyticsConstants.cardlyticsApiNames.secToken),a(e)}};l.CORS(t).then(function(e){if(e.d)i(e.d);else{var t={responseText:u.cardlyticsConstants.errors.ResponseFormatError};c.cardlyticsAPI.logCardlyticsError(t,r,u.cardlyticsConstants.cardlyticsApiNames.secToken,e),a()}})},getOfferCountsAPI:function(r,i,a){if(r!=u.cardlyticsConstants.errors.CustomerNotFoundException){var e={};e.securityToken=r,e.countLevel=d.cardlyticsConfig.cardlyticsOfferCountLevel,e.limits={},e.limits.RedemptionLookback=d.cardlyticsConfig.cardlyticsRedemeptionLookbackGetCount,e.limits.ExpiredLookback=d.cardlyticsConfig.cardlyticsExpiredLookbackGetCount,e.data={},e.data.ExtraData=u.cardlyticsConstants.extraData,e=JSON.stringify(e);var t={url:d.cardlyticsConfig.cardlyticsServiceUrl+"/public/BankServiceApi45Ex.asmx/GetOfferCountDetail",dataType:"json",contentType:"application/json",timeout:d.cardlyticsConfig.timeOutCardlyticsApi,method:"POST",data:e,error:function(e,t,i){c.cardlyticsAPI.logCardlyticsError(e,r,u.cardlyticsConstants.cardlyticsApiNames.getOfferCountDetail),a()}};l.CORS(t).then(function(e){if(e.d)i(e.d.OfferCounts);else{var t={responseText:u.cardlyticsConstants.errors.ResponseFormatError};c.cardlyticsAPI.logCardlyticsError(t,r,u.cardlyticsConstants.cardlyticsApiNames.getOfferCountDetail,e),a()}})}else{var n={error:u.cardlyticsConstants.errors.CustomerNotFoundException,api:u.cardlyticsConstants.cardlyticsApiNames.getOfferCountDetail};o.Logger.logMsg(n),a()}},startSessionAPI:function(r,i,a){var e={};if(null!=r||"null"!=r){e.SecurityToken=r,e.Channel=d.cardlyticsConfig.cardlyticsChannel,e.ExtraData=u.cardlyticsConstants.extraData,e=JSON.stringify(e);var t={url:d.cardlyticsConfig.cardlyticsServiceUrl+"/public/BankServiceApi43.asmx/StartSession",dataType:"json",contentType:"application/json",timeout:d.cardlyticsConfig.timeOutCardlyticsApi,method:"POST",data:e,error:function(e,t,i){c.cardlyticsAPI.logCardlyticsError(e,r,u.cardlyticsConstants.cardlyticsApiNames.getSession),a()}};l.CORS(t).then(function(e){if(e.d)i(e.d);else{var t={responseText:u.cardlyticsConstants.errors.ResponseFormatError};c.cardlyticsAPI.logCardlyticsError(t,r,u.cardlyticsConstants.cardlyticsApiNames.getSession,e),a()}})}else{var n={error:u.cardlyticsConstants.errors.CustomerNotFoundException,api:u.cardlyticsConstants.cardlyticsApiNames.getSession,securityToken:r};o.Logger.logMsg(n),a()}},getOffersAPI:function(r,e,t,i,a,n){var o={};o.securityToken=r,o.offerStates=e,o.offerType=0,o.limits=t,o.location=i,o.channel=d.cardlyticsConfig.cardlyticsChannel,o.data={},o.data.ExtraData=u.cardlyticsConstants.extraData,o=JSON.stringify(o);var s={url:d.cardlyticsConfig.cardlyticsServiceUrl+"/public/BankServiceApi45Ex.asmx/GetOffers",dataType:"json",contentType:"application/json",timeout:d.cardlyticsConfig.timeOutCardlyticsApi,method:"POST",data:o,error:function(e,t,i){c.cardlyticsAPI.logCardlyticsError(e,r,u.cardlyticsConstants.cardlyticsApiNames.getOffers),n()}};l.CORS(s).then(function(e){if(e.d)a(e.d);else{var t={responseText:u.cardlyticsConstants.errors.ResponseFormatError};c.cardlyticsAPI.logCardlyticsError(t,r,u.cardlyticsConstants.cardlyticsApiNames.getOffers,e),n()}})},logCardlyticsError:function(e,t,i,r){if(d.cardlyticsConfig.isLogCardlyticsError&&"true"===d.cardlyticsConfig.isLogCardlyticsError){var a=e.responseText&&0<e.responseText.indexOf("CustomerNotFoundException"),n=((new Error).stack,{API:i||"--",httpStatus:e.status||"--",details:e.responseText||"--",accountId:t,responseData:r||"--"});a?o.Logger.logMsg(n):o.Logger.logErrorMsgObject(s.adErrorTypes.cardlytics_error,n)}}}}),define("mktui-fx/cardlytics/cardlyticsimpression",["require","exports","jquery","mktui-fx/cardlytics/cardlyticsconfig","mktui-fx/util/cors","mktui-fx/cardlytics/cardlyticsapi","mktui-fx/cardlytics/CardlyticsCache","mktui-fx/cardlytics/cardlyticsConstants","mktui-fx/cardlytics/CardlyticsOfferState"],function(e,t,c,d,l,u,f,p,m){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),c=__importDefault(c),t.cardlyticsImpression={invokeElementExpandedEvent:function(e,r,t,a){var i=f.cardlyticsCache.getStorage(p.cardlyticsConstants.offerState),n=p.cardlyticsConstants.availableDisplayType;i===m.CardlyticsOfferState.redeemed?n=p.cardlyticsConstants.redeemedDisplayType:i===m.CardlyticsOfferState.expired&&(n=p.cardlyticsConstants.expiredDisplayType);var o=JSON.stringify({SecurityToken:r.securityToken||"",Channel:d.cardlyticsConfig.cardlyticsChannel,Location:r.location||"",OfferId:e||"",DisplayType:n,TransactionId:d.cardlyticsConfig.cardlyticsTranasctionId,ExtraData:p.cardlyticsConstants.cardlyticsExtraData}),s={url:d.cardlyticsConfig.cardlyticsServiceUrl+"/public/BankServiceApi43.asmx/DisplayElementExpanded",dataType:"json",contentType:"application/json",timeout:d.cardlyticsConfig.timeOutCardlyticsApi,method:"POST",cache:!0,data:o,error:function(e,t,i){u.cardlyticsAPI.logCardlyticsError(e,r.securityToken,"DisplayElementExpanded API"),a()}};l.CORS(s).then(function(e){e.d?t(e.d):a()})},invokeUrlLinkClickedEvent:function(e,t,i,r){if(void 0!==t.securityToken&&void 0!==t.location){var a={};a.SecurityToken=t.securityToken||"",a.Channel=d.cardlyticsConfig.cardlyticsChannel,a.Location=t.location||"",a.OfferId=e,a.DisplayType=d.cardlyticsConfig.cardlyticsDisplayTypeOffer,a.TransactionId=d.cardlyticsConfig.cardlyticsTranasctionId,a.ExtraData="Chase Cardlytics",a=JSON.stringify(a);var n={url:d.cardlyticsConfig.cardlyticsServiceUrl+"/public/BankServiceApi43.asmx/UrlLinkClicked",dataType:"json",contentType:"application/json",timeout:d.cardlyticsConfig.timeOutCardlyticsApi,method:"POST",cache:!0,data:a,error:function(e,t,i){r()}};l.CORS(n).then(function(e){e.d?i(e.d):r()})}},invokeRewardsSummaryLinkClickedEvent:function(e,t,r){if(void 0!==e.securityToken&&void 0!==e.location){var i={};i.SecurityToken=e.securityToken||"",i.Channel=d.cardlyticsConfig.cardlyticsChannel,i.Location=e.location||"",i.OfferId="0",i.DisplayType=d.cardlyticsConfig.cardlyticsDisplayTypeOther,i.TransactionId=d.cardlyticsConfig.cardlyticsTranasctionId,i.ExtraData="Chase Cardlytics",i=JSON.stringify(i);var a={url:d.cardlyticsConfig.cardlyticsServiceUrl+"/public/BankServiceApi43.asmx/RewardSummaryLinkClicked",dataType:"json",contentType:"application/json",timeout:d.cardlyticsConfig.timeOutCardlyticsApi,method:"POST",cache:!0,data:i,error:function(e,t,i){r()}};l.CORS(a).then(function(e){e.d?t(e.d):r()})}else r()},invokeMultipleViewEvent:function(e,r,t,a){if(void 0!==r.securityToken&&void 0!==r.location){var i=f.cardlyticsCache.getStorage(p.cardlyticsConstants.offerState),n=p.cardlyticsConstants.availableDisplayType;i===m.CardlyticsOfferState.redeemed?n=p.cardlyticsConstants.redeemedDisplayType:i===m.CardlyticsOfferState.expired&&(n=p.cardlyticsConstants.expiredDisplayType);var o={};o.SecurityToken=r.securityToken||"",o.Channel=d.cardlyticsConfig.cardlyticsChannel,o.DisplayServings=[],c.default.each(e,function(e,t){var i={};i.DisplayTypeId=t.id||t||"",i.Transactionid=d.cardlyticsConfig.cardlyticsTranasctionId,i.Location=r.location,i.DisplayType=n,i.OfferChecksum=t.checkSum||"",o.DisplayServings.push(i)}),o.ExtraData=p.cardlyticsConstants.cardlyticsExtraData,o=JSON.stringify(o);var s={url:d.cardlyticsConfig.cardlyticsServiceUrl+"/public/BankServiceApi43.asmx/MarkMultipleServed",dataType:"json",contentType:"application/json",timeout:d.cardlyticsConfig.timeOutCardlyticsApi,method:"POST",cache:!0,data:o,error:function(e,t,i){u.cardlyticsAPI.logCardlyticsError(e,r.securityToken,"MarkMultipleServed API"),a()}};l.CORS(s).then(function(e){e.d?t(e.d):a()})}}}}),define("mktui-fx/cardlytics/cardlyticsutil",["require","exports","jquery","mktui-fx/cardlytics/cardlyticsconfig","mktui-fx/cardlytics/cardlyticsapi","mktui-fx/cardlytics/CardlyticsCache","mktui-fx/cardlytics/cardlyticsConstants","mktui-fx/util/Logger","mktui-fx/ads/topic"],function(e,o,s,r,c,d,l,a,t){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),s=__importDefault(s),o.cardlyticsUtil={getSourceCustomerIds:function(e){var r=[],a={};return s.default.each(e,function(e,t){var i=new s.default.Deferred;null==d.cardlyticsCache.getStorage(l.cardlyticsConstants.sourceCustomerId,t)?c.cardlyticsAPI.getSourceCustomerIdAPI(t,function(e){d.cardlyticsCache.setStorage(l.cardlyticsConstants.sourceCustomerId,e,t),a[t]=e,i.resolve(a)},function(){d.cardlyticsCache.setStorage(l.cardlyticsConstants.sourceCustomerId,null,t),i.resolve(a)}):(a[t]=d.cardlyticsCache.getStorage(l.cardlyticsConstants.sourceCustomerId,t),i.resolve(a)),r.push(i)}),s.default.when.apply(void 0,r).promise()},getSecurityTokens:function(e){var a=[],n={};return s.default.each(e,function(t,i){var r=new s.default.Deferred;null==d.cardlyticsCache.getStorage(l.cardlyticsConstants.securityToken,t)?c.cardlyticsAPI.getSecurityTokenAPI(i,function(e){d.cardlyticsCache.setStorage(l.cardlyticsConstants.securityToken,e,t),n[t]=e,r.resolve(n)},function(e){e.responseText&&0<e.responseText.indexOf("CustomerNotFoundException")&&(i=l.cardlyticsConstants.errors.CustomerNotFoundException),d.cardlyticsCache.setStorage(l.cardlyticsConstants.securityToken,i,t),r.resolve(n)}):(n[t]=d.cardlyticsCache.getStorage(l.cardlyticsConstants.securityToken,t),r.resolve(n)),a.push(r)}),s.default.when.apply(void 0,a).promise()},getOfferCounts:function(e){var t=[],n={};return s.default.each(e,function(i,r){var a=new s.default.Deferred;c.cardlyticsAPI.getOfferCountsAPI(r,function(e){var t=0;void 0!==e.NotActivated&&(t+=e.NotActivated),void 0!==e.Activated&&(t+=e.Activated),n[i]={},n[i].accountId=i,n[i][l.cardlyticsConstants.securityToken]=r,n[i].count=t,d.cardlyticsCache.setStorage(l.cardlyticsConstants.offerCount,""+t,i),a.resolve(n)},function(){d.cardlyticsCache.setStorage(l.cardlyticsConstants.offerCount,null,i),a.resolve(n)}),t.push(a)}),s.default.when.apply(void 0,t).promise()},getSecurityTokenAllOffers:function(e,t){var i=new s.default.Deferred,r=d.cardlyticsCache.getStorage(l.cardlyticsConstants.securityToken,t);return r?(a.Logger.debugMsg("Cardlytics : Get the security token from the cache for the security token:",r),i.resolve(r)):s.default.when(o.cardlyticsUtil.getSourceCustomerIds(e)).then(function(e){s.default.when(o.cardlyticsUtil.getSecurityTokens(e)).then(function(e){e[t]?(i.resolve(e[t]),a.Logger.debugMsg("Cardlytics : Get the security token from Cardlytics API for the security token:",e[t])):i.reject(l.cardlyticsConstants.errors.CustomerNotFoundException)},function(){i.reject(l.cardlyticsConstants.errors.SourceCustomerIdApiFailure)})},function(){i.reject(l.cardlyticsConstants.errors.SecurityTokenAPiFailure)}),i.promise()},deleteTopic:function(e){delete t.Topic.channels[e]},responseConstructor:function(e,t,i){var r={};return r.success=t,r.html=e,t||(r.errorMessage=i),e},allReplace:function(e,t,i,r){for(var a in"singlepage"==i&&"Added"==r?e=e.replace("jpui sixersoffers","jpui sixersoffers dashboard"):"singlepage"==i&&r==l.cardlyticsConstants.slideInCTA&&(e=e.replace("jpui sixersoffers added","jpui sixersoffers added dashboard")),t)e="{{reference-zCDLX.EarnedAmount_EarnedAmount}}"!=a?e.replace(new RegExp(a,"g"),t[a]):e.replace(a,t[a]);return e},setCarouselSummaryInfo:function(e,t,i,r){var a=void 0!==t.nickname?t.nickname:"",n=void 0!==t.maskNumber?".."+t.maskNumber:"",o="For ";"es_us"==t.language&&(o="Para "),e.accountInfo=o+a+" ("+n+")",e.isSingleAccount=!1,"singlepage"==r&&(e.isSingleAccount=!0),e.totalOffers=t.count,e.accountId=t.accountId,e.categoryId="Available"},SetOfferObject:function(e,t,i,r,a){var n={};n.placementId="placement"+i,n.offerTileHtml=a,n.offerId=t.OfferId,n.accountId=e.accountId,r.push(n)},getOfferState:function(e){var t={offerState:"Added",offerStateClass:"jpui confirmation icon"};return void 0!==e.EarnedDate&&(t.offerState="Redeemed",t.offerStateClass="jpui confirmation icon"),t},getOfferValue:function(e,t,i){return t?Number(e)+"%":"earned"===i?"$"+Number(e).toFixed(2):e%1!=0?"$"+Number(e).toFixed(2):"$"+Math.round(100*e)/100},getCustomDate:function(e,t){e=(e=(e=(e=e.replace(/\//g,"")).replace(/\//g,"")).replace("Date(","")).replace(")",""),e=parseInt(e);var i=new Date(e);return"due"==t?i.getMonth()+1+"/"+i.getDate()+"/"+i.getFullYear():"earned"==t?r.cardlyticsConfig.cardlyticsMonths[i.getMonth()]+" "+i.getDate()+", "+i.getFullYear():void 0},getAdResponseByOfferId:function(e,t){var i={};e.DisplayOffers&&0<e.DisplayOffers.length?e=e.DisplayOffers:e.Redemptions&&0<e.Redemptions.length?e=e.Redemptions:e.ExpiredOffers&&0<e.ExpiredOffers.length&&(e=e.ExpiredOffers);for(var r=0;r<e.length;r++)if(e[r].OfferId==t){i=e[r];break}return i},parsePostMessage:function(e){var t=document.createElement("div");t.id="tmp_div",t.innerHTML=e;for(var i=t.getElementsByTagName("a"),r=0;r<i.length;r++){var a={},n=i[r].getAttribute("href").split("?");i[r].setAttribute("href","javascript:void(0);"),i[r].setAttribute("target","_self"),i[r].setAttribute("alt","Opens dialog"),0<n.length&&(i[r].setAttribute("blue-click","requestUrlLinkClick"),void 0!==n[1]&&(a.navKey="requestCardAnalyticsMerchantSite",a.params={},a.params.rawAppend={},a.params.rawAppend.metchantUrl="?"+n[1],i[r].setAttribute("blue-param",JSON.stringify(a)),i[r].setAttribute("id","cardlytics_third_party_link")))}return t.innerHTML},isLocalStorageExists:function(e){return null!=localStorage.getItem(e)&&"null"!=localStorage.getItem(e)},encryptHash:function(e,t,i){var r=o.cardlyticsUtil.encrypt(e,t);return o.cardlyticsUtil.hashDigest(r+i)},encrypt:function(e,t){var i=Crypto,r=i.enc.Utf8.parse(t),a=i.enc.Hex.parse("0000000000000000"),n=i.AES.encrypt(e,r,{iv:a,mode:i.mode.CBC,keySize:16,padding:i.pad.Pkcs7});return btoa(o.cardlyticsUtil.hexToAscii(n.ciphertext.toString()))},hashDigest:function(e){var t=Crypto;return t.SHA256(e).toString(t.enc.Hex)},hexToAscii:function(e){for(var t=e.toString(),i="",r=0;r<t.length;r+=2)i+=String.fromCharCode(parseInt(t.substr(r,2),16));return i}}}),define("mktui-fx/cardlytics/cardlyticstemplate",["require","exports","jquery","mktui-fx/cardlytics/cardlyticsconfig","mktui-fx/cardlytics/cardlyticsutil","mktui-fx/util/Logger","mktui-fx/ads/topic","mktui-fx/util/cors","mktui-fx/cardlytics/cardlyticsConstants"],function(d,v,m,h,C,n,l,i,b){"use strict";Object.defineProperty(v,"__esModule",{value:!0}),m=__importDefault(m),v.cardlyticsTemplate={getOfferTemplate:function(r,t,a){var e={error:function(e,t,i){n.Logger.logErrorMsg("Cardlytics - Get content call is failed for the template:",r),a()}};i.CORS(r,e).then(function(e){t(e)})},offerTiletemplateHandler:function(o,s,c,d,l){var u=m.default.Deferred(),f=!1;"singlepage"==d&&(f=!0);var e=h.cardlyticsConfig.contentServer+h.cardlyticsConfig.cardlyticsOfferTileTemplateUrlEN;return v.cardlyticsTemplate.getOfferTemplate(e,function(e){var t=JSON.parse(e),i=t.carouselContentLabels,r=t.result.offer,a=[],n={};o.language=s,C.cardlyticsUtil.setCarouselSummaryInfo(n,o,c,d),l||m.default.each(c.DisplayOffers,function(e,t){var i=v.cardlyticsTemplate.loadTileHtml(o,t,r,"available",d);C.cardlyticsUtil.SetOfferObject(o,t,e,a,i)}),v.cardlyticsTemplate.renderOfferCarousel(o,a,n,i,f,function(e){u.resolve(e)})},function(){u.reject()}),u.promise()},loadTileHtml:function(e,t,i,r,a){var n=i.availableOfferViewHTML,o="Added",s="",c="",d="",l="New",u="jpui sixersoffers added",f="",p='sixersoffers__badge-container"',m='sixersoffers__badge"',g=h.cardlyticsConfig.cardlyticsImageHost+"?ImageId="+t.ImageId;d=0<t.DaysLeft?1==t.DaysLeft?t.DaysLeft+" day left":t.DaysLeft+" days left":"Last day",null!=t.FirstServedEvents&&(l="",p='sixersoffers__badge-container" style="background-color:#FFF"',m='sixersoffers__badge" style="display:none"'),null==t.ActivatedDate&&(u="jpui sixersoffers",o="singlepage"==a?b.cardlyticsConstants.slideInCTA:b.cardlyticsConstants.carouselCTA),t.IsPercentageOffer,"Redemptions"==r?(t=v.cardlyticsTemplate.getFormattedValues(t),o="Redeemed",g=h.cardlyticsConfig.cardlyticsImageHost+"?ImageId="+t.ImageId,n=i.redeemedOfferViewHTML,void 0!==t.EarnedDate&&(s=C.cardlyticsUtil.getCustomDate(t.EarnedDate,"earned")),void 0!==t.EarnedAmount&&(f=C.cardlyticsUtil.getOfferValue(t.EarnedAmount,!1,"earned")),null!=t.FirstServedEvents&&(l="",p='sixersoffers__badge-container" style="background-color:#FFF"',m='sixersoffers__badge" style="display:none"'),null==t.ActivatedDate&&(u="jpui sixersoffers",o="Add to card"),t.IsPercentageOffer):"ExpiredOffers"==r&&(n=i.expiredOfferViewHTML,f="",o="Expired",void 0!==t.EndDate&&(c=C.cardlyticsUtil.getCustomDate(t.EndDate,"earned")));var y={"{{imgid}}":t.MerchantName,"{{earnedAmount}}":f,"{{reference-zCDLX.OfferImage_ImageId}}":g,"{{reference-zCDLX.OfferStatus_FirstServedEvents}}":l,"{{reference-zCDLX.MerchantName_MerchantName}}":t.MerchantName,'sixersoffers__badge-container"':p,'sixersoffers__badge"':m,"{{reference-zCDLX.CashBack_OfferedAmount}}":void 0!==t.OfferedAmount?C.cardlyticsUtil.getOfferValue(t.OfferedAmount,t.IsPercentageOffer):"","{{reference-zCDLX.DaysLeft_DaysLeft}}":d,"{{offerId}}":t.OfferId,"{{accountId}}":e.accountId,"{{offerCheckSum}}":t.CheckSum,"{{reference-zCDLX.CTA_ActivatedDate}}":o,"{{reference-zCDLX.EarnedAmount_EarnedAmount}}":f,"{{reference-zCDLX.EarnedDate_EarnedDate}}":s,"{{reference-zCDLX.EndDate_EndDate}}":c,"jpui sixersoffers added":u};return n=C.cardlyticsUtil.allReplace(n,y,a,o)},offerDetailsTemplateHandler:function(e,t,s){var c=m.default.Deferred();s=v.cardlyticsTemplate.getFormattedValues(s);var d,l='offerdetails__info-two"',u='days-left-container"',f="",p='expire-content" style="display:none"',i=h.cardlyticsConfig.contentServer+h.cardlyticsConfig.cardlyticsOfferDetailTemplateUrlEN;return"es_us"==t&&(i=h.cardlyticsConfig.contentServer+h.cardlyticsConfig.cardlyticsOfferDetailTemplateUrlEs),v.cardlyticsTemplate.getOfferTemplate(i,function(e){d=JSON.parse(e).result.offer.html;var t="",i=C.cardlyticsUtil.getCustomDate(s.EndDate,"due");t=C.cardlyticsUtil.getOfferValue(s.OfferedAmount,s.IsPercentageOffer);var r,a=C.cardlyticsUtil.getOfferState(s),n=C.cardlyticsUtil.parsePostMessage(s.PostMessage);void 0!==s.EarnedAmount&&(f=C.cardlyticsUtil.getOfferValue(s.OfferedAmount,s.IsPercentageOffer,"earned"),r='earned-amount-content"',l='offerdetails__info-two" style="display:none"',u='days-left-container" style="display:none"',t="",p='expire-content"');var o={"{{reference-zCDLX.OfferImage_ImageId}}":h.cardlyticsConfig.cardlyticsImageHost+"?ImageId="+s.ImageId,"{{reference-zCDLX.MerchantName_MerchantName}}":s.MerchantName,"{{reference-zCDLX.CashBack_OfferedAmount}}":t,"{{reference-zCDLX.DaysLeft_DaysLeft}}":s.DaysLeft,"{{reference-zCDLX.EndDate_EndDate}}":i,"{{reference-zCDLX.OfferDetails_PostMessage}}":n,"{{reference-zCDLX.CTA_ActivatedDate}}":a.offerState,"jpui confirmation icon":a.offerStateClass,"{{earnedAmount}}":f,'offerdetails__info-two"':l,'days-left-container"':u,'earned-amount-content"':r,'expire-content"':p};d=C.cardlyticsUtil.allReplace(d,o),c.resolve(d)},function(){c.reject()}),c.promise()},getFormattedValues:function(e){return e.PostMessage=void 0!==e.PostMessage?e.PostMessage:null!=typeof e.Offer.PostMessage?e.Offer.PostMessage:"",e.EndDate=void 0!==e.EndDate?e.EndDate:null!=typeof e.Offer.EndDate?e.Offer.EndDate:"",e.OfferId=void 0!==e.OfferId?e.OfferId:null!=typeof e.Offer.OfferId?e.Offer.OfferId:"",e.MerchantName=void 0!==e.MerchantName?e.MerchantName:null!=typeof e.Offer.MerchantName?e.Offer.MerchantName:"",e.OfferedAmount=void 0!==e.OfferedAmount?e.OfferedAmount:null!=typeof e.Offer.OfferedAmount?e.Offer.OfferedAmount:"",e.IsPercentageOffer=void 0!==e.IsPercentageOffer?e.IsPercentageOffer:null!=typeof e.Offer.IsPercentageOffer?e.Offer.IsPercentageOffer:"",e.DaysLeft=void 0!==e.DaysLeft?e.DaysLeft:null!=typeof e.Offer.DaysLeft?e.Offer.DaysLeft:"",e.ImageId=void 0!==e.ImageId?e.ImageId:null!=typeof e.Offer.ImageId?e.Offer.ImageId:"",e.FirstServedEvents=void 0!==e.FirstServedEvents?e.FirstServedEvents:null!=typeof e.Offer.FirstServedEvents?e.Offer.FirstServedEvents:"",e.ActivatedDate=void 0!==e.ActivatedDate?e.ActivatedDate:null!=typeof e.Offer.ActivatedDate?e.Offer.ActivatedDate:"",e},allOffersTemplateHandler:function(a,i,n,o){var s=m.default.Deferred(),c=[],e=h.cardlyticsConfig.contentServer+h.cardlyticsConfig.cardlyticsOfferTileTemplateUrlEN;return"es_us"==i&&(e=h.cardlyticsConfig.contentServer+h.cardlyticsConfig.cardlyticsOfferTileTemplateUrlEN),v.cardlyticsTemplate.getOfferTemplate(e,function(e){var t=JSON.parse(e).carouselContentLabels,r=JSON.parse(e).result.offer;m.default.each(n[o],function(e,t){if("Redemptions"===o||"DisplayOffers"===o||"ExpiredOffers"===o&&t.State==h.cardlyticsConfig.showExpiredState){var i=v.cardlyticsTemplate.loadTileHtml(a,t,r,o,"alloffers");C.cardlyticsUtil.SetOfferObject(a,t,e,c,i)}}),v.cardlyticsTemplate.loadAllOffersComponent(c,i,t,function(e){s.resolve(e)})},function(){s.reject()}),s.promise()},renderGenericError:function(i,a){m.default.when(v.cardlyticsTemplate.getAEMContentLabel()).then(function(e){var t=h.cardlyticsConfig.marketingCxoAdsUi;requirejs.config({paths:{"marcom-ads-ui-bundles":t}});var r=v.cardlyticsTemplate.getContentLabels(i,e);d(["marcom-ads-ui-bundles/mktui-cxo.min"],function(){d(["marcom-ads-ui/common/error/componentFactory"],function(e){var t=document.createDocumentFragment(),i={contentLabels:r,errorMessage:r.errorMessage,onComponentReady:function(){a(t)}};e.createErrorComponent(i,t)})})})},renderOfferCarousel:function(e,a,n,t,o,s){var i=h.cardlyticsConfig.marketingCxoAdsUi;requirejs.config({paths:{"marcom-ads-ui-bundles":i}});var c=v.cardlyticsTemplate.getContentLabels(e.language,t);d(["marcom-ads-ui-bundles/mktui-cxo.min"],function(){d(["marcom-ads-ui/merchant-offers/offer-carousel/componentFactory","marcom-ads-ui/mktuiStyles"],function(e,t){var i=document.createDocumentFragment(),r={offerList:a,isSingleAccount:o,offerSummary:n,contentLabels:c,eventSource:l.Topic,styleCss:t,onComponentReady:function(){s(i)}};e.createOfferCarousel(r,i)})})},loadAllOffersComponent:function(a,e,t,n){var i=h.cardlyticsConfig.marketingCxoAdsUi;requirejs.config({paths:{"marcom-ads-ui-bundles":i}});var o=v.cardlyticsTemplate.getContentLabels(e,t);d(["marcom-ads-ui-bundles/mktui-cxo.min"],function(){d(["marcom-ads-ui/merchant-offers/all-offers/componentFactory","marcom-ads-ui/mktuiStyles"],function(e,t){var i=document.createDocumentFragment(),r={offerList:a,contentLabels:o,eventSource:l.Topic,styleCss:t,errorMessage:"",onComponentReady:function(){n(i)}};e.createAllOffers(r,i)})})},getAEMContentLabel:function(){var t=m.default.Deferred(),i={},e=h.cardlyticsConfig.contentServer+h.cardlyticsConfig.cardlyticsOfferTileTemplateUrlEN;return v.cardlyticsTemplate.getOfferTemplate(e,function(e){i=JSON.parse(e).carouselContentLabels,t.resolve(i)},function(){t.resolve(i)}),t.promise()},loadAllOffersErrorComponent:function(i,o){m.default.when(v.cardlyticsTemplate.getAEMContentLabel()).then(function(e){var t=h.cardlyticsConfig.marketingCxoAdsUi,a=[];requirejs.config({paths:{"marcom-ads-ui-bundles":t}});var n=v.cardlyticsTemplate.getContentLabels(i,e);d(["marcom-ads-ui-bundles/mktui-cxo.min"],function(){d(["marcom-ads-ui/merchant-offers/all-offers/componentFactory","marcom-ads-ui/mktuiStyles"],function(e,t){var i=document.createDocumentFragment(),r={offerList:a,contentLabels:n,eventSource:l.Topic,styleCss:t,errorMessage:n.errorMessage||b.cardlyticsConstants.errors.ChaseOfferNotAvailable,onComponentReady:function(){o(i)}};e.createAllOffers(r,i)})})})},loadTotalEarnedComponent:function(n,i,o){m.default.when(v.cardlyticsTemplate.getAEMContentLabel()).then(function(e){var t=h.cardlyticsConfig.marketingCxoAdsUi;requirejs.config({paths:{"marcom-ads-ui-bundles":t}});var a=v.cardlyticsTemplate.getContentLabels(i.language,e);d(["marcom-ads-ui-bundles/mktui-cxo.min"],function(){d(["marcom-ads-ui/merchant-offers/offer-rewards/componentFactory","marcom-ads-ui/mktuiStyles"],function(e,t){var i=document.createDocumentFragment(),r={totalEarnedToDate:+n.Enrollment.TotalEarned,contentLabels:a,styleCss:t,onComponentReady:function(){o(i)}};e.createTotalEarned(r,i)})})}),C.cardlyticsUtil.deleteTopic(b.cardlyticsConstants.topicCardlyticsOfferList)},getContentLabels:function(e,t){return"es_us"==e?t.es||"":t.en||""}}}),define("mktui-fx/cardlytics/cardlyticsinit",["require","exports","jquery","mktui-fx/cardlytics/cardlyticsconfig","mktui-fx/cardlytics/cardlyticsutil","mktui-fx/cardlytics/cardlyticsimpression","mktui-fx/cardlytics/cardlyticsapi","mktui-fx/cardlytics/cardlyticstemplate","mktui-fx/cardlytics/CardlyticsCache","mktui-fx/ads/topic","mktui-fx/cardlytics/cardlyticsConstants","mktui-fx/util/Logger","mktui-fx/cardlytics/CardlyticsOfferState"],function(e,y,v,h,C,a,n,b,k,I,O,x,S){"use strict";Object.defineProperty(y,"__esModule",{value:!0}),v=__importDefault(v),y.cardlyticsInit={userAccount:{},loadCardlyticsOffer:function(e,t,i,r,a){var n=[];v.default.each(t,function(e,t){n.push(e)}),window.accountIds=n,0<=h.cardlyticsConfig.ovdTagMapCode.indexOf(e)&&(""==i.requiredAdData.siteacct||null==i.requiredAdData.siteacct)?y.cardlyticsInit.setDashboard(e,n,t,i,r,a,"ovd"):0<=h.cardlyticsConfig.classicDashboardTagMapCode.indexOf(e)&&(""==i.requiredAdData.siteacct||null==i.requiredAdData.siteacct)?y.cardlyticsInit.setDashboard(e,n,t,i,r,a,"dashboard"):0<=h.cardlyticsConfig.ovdTagMapCode.indexOf(e)&&""!=i.requiredAdData.siteacct&&void 0!==i.requiredAdData.siteacct&&void 0===i.requiredAdData.offerId?y.cardlyticsInit.setSingleAccountView(e,n,t,i,r,a,"ovd"):0<=h.cardlyticsConfig.classicDashboardTagMapCode.indexOf(e)&&""!=i.requiredAdData.siteacct&&void 0!==i.requiredAdData.siteacct&&void 0===i.requiredAdData.offerId?y.cardlyticsInit.setSingleAccountView(e,n,t,i,r,a,"dashboard"):0<=h.cardlyticsConfig.offerDetailsTagMapCode.indexOf(e)&&""!=i.requiredAdData.offerId&&void 0!==i.requiredAdData.offerId?y.cardlyticsInit.setOfferDetails(e,n,i,r,a):0<=h.cardlyticsConfig.seeAllOffersTagMapCode.indexOf(e)&&("cardlyticsAvailableOffers"==i.placementId||"cardlyticsRedeemedOffers"==i.placementId||"cardlyticsExpiredOffers"==i.placementId)?y.cardlyticsInit.setAllOffers(e,n,i,r,a,"alloffers"):0<=h.cardlyticsConfig.seeAllOffersTagMapCode.indexOf(e)&&("cardlyticsAvailableRewardsEarned"==i.placementId||"cardlyticsRedeemedRewardsEarned"==i.placementId||"cardlyticsExpiredRewardsEarned"==i.placementId||"cardlyticsRewardsEarned"==i.placementId)&&y.cardlyticsInit.setTotalRewards(e,n,i,r,a,"totaloffers"),I.Topic.exists("trackSeeAllClick")||I.Topic("trackSeeAllClick").subscribe(function(e){void 0!==e&&void 0!==e.adData.value.params.dynamicParams.accountId&&y.cardlyticsInit.cardlyticsRewardsSummaryLinkClick(e.adData.value.params.dynamicParams.accountId)}),I.Topic.exists("cardlyticsMultipleView")||I.Topic("cardlyticsMultipleView").subscribe(function(e,t){var i={};if(1<window.accountIds.length){if(k.cardlyticsCache.isCardlyticsStorageExists(O.cardlyticsConstants.dashboardAccountId)){var r=k.cardlyticsCache.getStorage(O.cardlyticsConstants.dashboardAccountId);k.cardlyticsCache.isCardlyticsStorageExists(O.cardlyticsConstants.securityToken,r)&&(i.securityToken=k.cardlyticsCache.getStorage(O.cardlyticsConstants.securityToken,r))}}else k.cardlyticsCache.isCardlyticsStorageExists(O.cardlyticsConstants.securityToken,window.accountIds[0])&&(i.securityToken=k.cardlyticsCache.getStorage(O.cardlyticsConstants.securityToken,window.accountIds[0]));y.cardlyticsInit.cardlyticsMultipleView(t,i,e)}),I.Topic.exists("trackUrlLinkClick")||I.Topic("trackUrlLinkClick").subscribe(function(){var e={};if(1<window.accountIds.length){if(k.cardlyticsCache.isCardlyticsStorageExists(O.cardlyticsConstants.dashboardAccountId)){var t=k.cardlyticsCache.getStorage(O.cardlyticsConstants.dashboardAccountId);k.cardlyticsCache.isCardlyticsStorageExists(O.cardlyticsConstants.securityToken,t)&&(e.securityToken=k.cardlyticsCache.getStorage(O.cardlyticsConstants.securityToken,t))}}else k.cardlyticsCache.isCardlyticsStorageExists(O.cardlyticsConstants.securityToken,window.accountIds[0])&&(e.securityToken=k.cardlyticsCache.getStorage(O.cardlyticsConstants.securityToken,window.accountIds[0]));y.cardlyticsInit.cardlyticsUrlLinkClick(window.offerIdVal,e)})},setDashboard:function(e,r,a,n,o,s,c){k.cardlyticsCache.setStorage(O.cardlyticsConstants.offerState,S.CardlyticsOfferState.available);var t={};t.pageId=e;var d=[],l={requestId:n.requestId||""};n.placementId=void 0===n.placementId?null:n.placementId,v.default.when(C.cardlyticsUtil.getSourceCustomerIds(r)).then(function(e){0<Object.keys(e).length&&v.default.when(C.cardlyticsUtil.getSecurityTokens(e)).then(function(e){0<Object.keys(e).length?v.default.when(C.cardlyticsUtil.getOfferCounts(e)).then(function(i){t=i[Object.keys(i).reduce(function(e,t){return i[e].count>i[t].count?e:t})],v.default.when(y.cardlyticsInit.initSession(t)).then(function(t){if(k.cardlyticsCache.setStorage(O.cardlyticsConstants.dashboardAccountId,t.accountId),t.IsOptedIn){t.maskNumber=a[t.accountId].maskNumber,t.nickname=a[t.accountId].nickname,t.location=h.cardlyticsConfig.cardlyticslocation[c],k.cardlyticsCache.setStorage(O.cardlyticsConstants.cardlyticsLocation,t.location);var e={};e.LimitNumberOfOffers=O.cardlyticsConstants.limitNumberOfOffersCustom,e.MaxOffers=O.cardlyticsConstants.maxOffersDashboard,e.RedemptionLookback=h.cardlyticsConfig.cardlyticsRedemeptionLookbackAvailable,e.ExpiredLookback=h.cardlyticsConfig.cardlyticsExpiredLookbackAvailable,e.EnableSuppression=1<r.length;var i=[S.CardlyticsOfferState.NotActivated,S.CardlyticsOfferState.Activated];v.default.when(y.cardlyticsInit.getOffers(t,e,i)).then(function(e){void 0!==e.DisplayOffers&&0<e.DisplayOffers.length?v.default.when(b.cardlyticsTemplate.offerTiletemplateHandler(t,n.requiredAdData.locale,e,"dashboard",!1)).then(function(e){o(e,l,n.placementId)},function(){C.cardlyticsUtil.responseConstructor("",!1,"Failure to load the offer tile template"),s(n.placementId,d,l)}):v.default.when(b.cardlyticsTemplate.offerTiletemplateHandler(t,n.requiredAdData.locale,e,"dashboard",!0)).then(function(e){o(e,l,n.placementId)},function(){s(n.placementId,d,l)})},function(){s(n.placementId,d,l)})}else s(n.placementId,d,l)},function(){s(n.placementId,d,l)})},function(){s(n.placementId,d,l)}):s(n.placementId,d,l)},function(){s(n.placementId,d,l)})},function(){s(n.placementId)})},setSingleAccountView:function(e,t,i,r,a,n,o){k.cardlyticsCache.setStorage(O.cardlyticsConstants.offerState,S.CardlyticsOfferState.available);var s={};s.pageId=e;var c=[],d={requestId:r.requestId||""};if(r.placementId=void 0===r.placementId?null:r.placementId,void 0!==t&&0<t.length)if(k.cardlyticsCache.isCardlyticsStorageExists(O.cardlyticsConstants.sourceCustomerId,t[0]))if(k.cardlyticsCache.isCardlyticsStorageExists(O.cardlyticsConstants.securityToken,t[0])){s.accountId=t[0],s.securityToken=k.cardlyticsCache.getStorage(O.cardlyticsConstants.securityToken,t[0]),k.cardlyticsCache.isCardlyticsStorageExists(O.cardlyticsConstants.offerCount,t[0])&&(s.count=k.cardlyticsCache.getStorage(O.cardlyticsConstants.offerCount,t[0])),r.requiredAdData.siteacct=void 0===typeof r.requiredAdData.siteacct?o:r.requiredAdData.siteacct,s.location=h.cardlyticsConfig.cardlyticslocation[r.requiredAdData.siteacct],s.maskNumber=i[s.accountId].maskNumber,s.nickname=i[s.accountId].nickname,k.cardlyticsCache.setStorage(O.cardlyticsConstants.cardlyticsLocation,s.location);var l={};l.LimitNumberOfOffers=O.cardlyticsConstants.limitNumberOfOffersCustom,l.MaxOffers=O.cardlyticsConstants.maxOffersSlideIn,l.RedemptionLookback=h.cardlyticsConfig.cardlyticsRedemeptionLookbackAvailable,l.ExpiredLookback=h.cardlyticsConfig.cardlyticsExpiredLookbackAvailable,l.EnableSuppression=O.cardlyticsConstants.enableSuppressionFalse;var u=[S.CardlyticsOfferState.NotActivated,S.CardlyticsOfferState.Activated];v.default.when(y.cardlyticsInit.initSession(s)).then(function(t){v.default.when(y.cardlyticsInit.getOffers(t,l,u)).then(function(e){void 0!==e.DisplayOffers&&0<e.DisplayOffers.length?v.default.when(b.cardlyticsTemplate.offerTiletemplateHandler(t,r.requiredAdData.locale,e,"singlepage",!1)).then(function(e){a(e,d,r.placementId)},function(){n(r.placementId,c,d)}):v.default.when(b.cardlyticsTemplate.offerTiletemplateHandler(t,r.requiredAdData.locale,e,"dashboard",!0)).then(function(e){a(e,d,r.placementId)},function(){n(r.placementId,c,d)})},function(){n(r.placementId,c,d)})},function(){n(r.placementId,c,d)})}else n(r.placementId,c,d);else n(r.placementId,c,d)},initSession:function(t){var i=v.default.Deferred();if(null==k.cardlyticsCache.getStorage(O.cardlyticsConstants.IsOptedIn,t.accountId)&&null!=t.securityToken&&"null"!=t.securityToken)n.cardlyticsAPI.startSessionAPI(t.securityToken,function(e){k.cardlyticsCache.setStorage(O.cardlyticsConstants.IsOptedIn,e.IsOptedIn,t.accountId),t[O.cardlyticsConstants.IsOptedIn]=e.IsOptedIn,i.resolve(t)},function(){i.reject("User is not opted in")});else{var e=k.cardlyticsCache.getStorage(O.cardlyticsConstants.IsOptedIn,t.accountId);t[O.cardlyticsConstants.IsOptedIn]=e,i.resolve(t)}return i.promise()},getOffers:function(t,e,i){var r=v.default.Deferred();return n.cardlyticsAPI.getOffersAPI(t.securityToken,i,e,t.location,function(e){k.cardlyticsCache.setStorage(O.cardlyticsConstants.offerList,JSON.stringify(e),t.accountId),r.resolve(e)},function(){r.reject("Get Offers throwing error")}),r.promise()},setOfferDetails:function(e,i,r,a,n){var o,t={},s="";t.pageId=e,t.location="";var c=[],d={requestId:r.requestId||""};window.offerIdVal=r.requiredAdData.offerId,1==i.length?s=i[0]:k.cardlyticsCache.isCardlyticsStorageExists(O.cardlyticsConstants.dashboardAccountId)&&(s=k.cardlyticsCache.getStorage(O.cardlyticsConstants.dashboardAccountId)),t.securityToken=k.cardlyticsCache.getStorage(O.cardlyticsConstants.securityToken,s),k.cardlyticsCache.isCardlyticsStorageExists(O.cardlyticsConstants.cardlyticsLocation)&&(t.location=k.cardlyticsCache.getStorage(O.cardlyticsConstants.cardlyticsLocation)),v.default.when(y.cardlyticsInit.cardlyticsElementExpanded(r.requiredAdData.offerId,t)).then(function(e){var t={};r.placementId=void 0===r.placementId?null:r.placementId,void 0!==i&&0<i.length?k.cardlyticsCache.isCardlyticsStorageExists(O.cardlyticsConstants.offerList,s)&&""!=k.cardlyticsCache.getStorage(O.cardlyticsConstants.offerList,s)&&(t=C.cardlyticsUtil.getAdResponseByOfferId(JSON.parse(k.cardlyticsCache.getStorage(O.cardlyticsConstants.offerList,s)),r.requiredAdData.offerId),e?v.default.when(b.cardlyticsTemplate.offerDetailsTemplateHandler(s,r.requiredAdData.locale,t)).then(function(e){o=C.cardlyticsUtil.responseConstructor(e,!0,""),a(o,d,r.placementId)},function(){n(r.placementId,c,d)}):b.cardlyticsTemplate.renderGenericError(r.requiredAdData.locale,function(e){a(e,d,r.placementId)})):n(r.placementId,c,d)},function(){b.cardlyticsTemplate.renderGenericError(r.requiredAdData.locale,function(e){a(e,d,r.placementId)})})},setAllOffers:function(o,s,c,d,l,u){var f=!1,p=[],m={requestId:c.requestId||""};function g(){f=!0,b.cardlyticsTemplate.loadAllOffersErrorComponent(c.requiredAdData.locale,e)}function e(e){d(e,m,c.placementId,f,p)}v.default.when(C.cardlyticsUtil.getSecurityTokenAllOffers(c.requiredAdData.accountIdList,s[0])).then(function(e){var t={pageId:o};void 0!==c.requiredAdData.accountIdList&&0<c.requiredAdData.accountIdList.length&&v.default.each(c.requiredAdData.accountIdList,function(e,t){k.cardlyticsCache.isCardlyticsStorageExists(O.cardlyticsConstants.securityToken,t)&&p.push(t)}),c.placementId=void 0===c.placementId?null:c.placementId,t.accountId=s[0],t.securityToken=e;var i,r={};r.LimitNumberOfOffers=O.cardlyticsConstants.limitNumberOfOffersAll,r.MaxOffers=O.cardlyticsConstants.maxOffersAllOffers,r.EnableSuppression=O.cardlyticsConstants.enableSuppressionFalse,t.location=h.cardlyticsConfig.cardlyticslocation[u],k.cardlyticsCache.setStorage(O.cardlyticsConstants.cardlyticsLocation,t.location);var a=[S.CardlyticsOfferState.NotActivated,S.CardlyticsOfferState.Activated],n=O.cardlyticsConstants.displayofferKeyOffers;c.requiredAdData.categoryId.toLowerCase()===S.CardlyticsOfferState.available?(k.cardlyticsCache.setStorage(O.cardlyticsConstants.offerState,S.CardlyticsOfferState.available),a=[S.CardlyticsOfferState.NotActivated,S.CardlyticsOfferState.Activated],n=O.cardlyticsConstants.displayofferKeyOffers,r.RedemptionLookback=h.cardlyticsConfig.cardlyticsRedemeptionLookbackAvailable,r.ExpiredLookback=h.cardlyticsConfig.cardlyticsExpiredLookbackAvailable):c.requiredAdData.categoryId.toLowerCase()===S.CardlyticsOfferState.redeemed?(k.cardlyticsCache.setStorage(O.cardlyticsConstants.offerState,S.CardlyticsOfferState.redeemed),a=[S.CardlyticsOfferState.redeemed],n=O.cardlyticsConstants.displayofferKeyRedemption,r.RedemptionLookback=h.cardlyticsConfig.cardlyticsRedemeptionLookbackRedeemed,r.ExpiredLookback=h.cardlyticsConfig.cardlyticsExpiredLookbackRedeemed):c.requiredAdData.categoryId.toLowerCase()===S.CardlyticsOfferState.expired&&(k.cardlyticsCache.setStorage(O.cardlyticsConstants.offerState,S.CardlyticsOfferState.expired),a=[S.CardlyticsOfferState.expired],n=O.cardlyticsConstants.displayofferKeyExpired,r.RedemptionLookback=h.cardlyticsConfig.cardlyticsRedemeptionLookbackExpired,r.ExpiredLookback=h.cardlyticsConfig.cardlyticsExpiredLookbackExpired),v.default.when(y.cardlyticsInit.initSession(t)).then(function(t){v.default.when(y.cardlyticsInit.getOffers(t,r,a)).then(function(e){void 0!==e[n]&&0<e[n].length?(x.Logger.debugMsg("Cardlytics Publishing the topic:",O.cardlyticsConstants.topicCardlyticsOfferList),I.Topic(O.cardlyticsConstants.topicCardlyticsOfferList).publish(e,t),v.default.when(b.cardlyticsTemplate.allOffersTemplateHandler(t,c.requiredAdData.locale,e,n)).then(function(e){i=C.cardlyticsUtil.responseConstructor(e,!0,""),d(i,m,c.placementId,f,p)},function(){g()})):(I.Topic("cardlyticsOfferList").publish(e,t),l(c.placementId,p,m))},function(){g()})},function(){g()})},function(){g()})},setTotalRewards:function(e,r,a,t,n,i){var o={};o.pageId=e,o.language=a.requiredAdData.locale;var s=[];a.placementId=void 0===a.placementId?null:a.placementId;var c={requestId:a.requestId||""};function d(e){t(e,c,a.placementId)}setTimeout(function(){x.Logger.debugMsg("Cardlytics Subscribing the topic:",O.cardlyticsConstants.topicCardlyticsOfferList),I.Topic(O.cardlyticsConstants.topicCardlyticsOfferList).subscribe(function(e,t){if(x.Logger.debugMsg("Cardlytics :Event receiver for the Topic "+O.cardlyticsConstants.topicCardlyticsOfferList+" ,and the security token",t.securityToken),k.cardlyticsCache.isCardlyticsStorageExists(O.cardlyticsConstants.securityToken,r[0])){o.accountId=r[0];var i=k.cardlyticsCache.getStorage(O.cardlyticsConstants.securityToken,r[0]);o.securityToken=i,t.securityToken==o.securityToken&&void 0!==e?(x.Logger.debugMsg("Cardlytics :loadTotalEarnedComponent invoked for:",o.securityToken),b.cardlyticsTemplate.loadTotalEarnedComponent(e,o,d)):(x.Logger.debugMsg("Cardlytics :Security Token is mismatching:",o.securityToken),n(a.placementId,s,c))}else n(a.placementId,s,c)})},1e3)},cardlyticsElementExpanded:function(t,e){var i=v.default.Deferred();return""==t&&void 0===t||a.cardlyticsImpression.invokeElementExpandedEvent(t,e,function(e){e?(I.Topic("ElementExmapdedEvent").publish(t,!0),i.resolve(!0)):(I.Topic("ElementExmapdedEvent").publish(t,!1),i.reject(!1))},function(){I.Topic("ElementExmapdedEvent").publish(t,!1),i.reject(!1)}),i.promise()},cardlyticsUrlLinkClick:function(t,e){k.cardlyticsCache.isCardlyticsStorageExists(O.cardlyticsConstants.cardlyticsLocation)&&(e.location=k.cardlyticsCache.getStorage(O.cardlyticsConstants.cardlyticsLocation));var i=v.default.Deferred();return""==t&&void 0===t||a.cardlyticsImpression.invokeUrlLinkClickedEvent(t,e,function(e){e.success?(I.Topic("urlLinkClickedEvent").publish(t,!0),i.resolve(!0)):(I.Topic("urlLinkClickedEvent").publish(t,!1),i.reject(!1))},function(){I.Topic("urlLinkClickedEvent").publish(t,!1),i.reject(!1)}),i.promise()},cardlyticsRewardsSummaryLinkClick:function(e){var t=[];k.cardlyticsCache.isCardlyticsStorageExists(O.cardlyticsConstants.securityToken,e)&&(t.securityToken=k.cardlyticsCache.getStorage(O.cardlyticsConstants.securityToken,e)),k.cardlyticsCache.isCardlyticsStorageExists(O.cardlyticsConstants.cardlyticsLocation)&&(t.location=k.cardlyticsCache.getStorage(O.cardlyticsConstants.cardlyticsLocation));var i=v.default.Deferred();return a.cardlyticsImpression.invokeRewardsSummaryLinkClickedEvent(t,function(e){e.success?(I.Topic("rewardsSummaryClickEvent").publish(!0),i.resolve(!0)):(I.Topic("rewardsSummaryClickEvent").publish(!1),i.reject(!1))},function(){I.Topic("rewardsSummaryClickEvent").publish(!1),i.reject(!1)}),i.promise()},cardlyticsMultipleView:function(e,t,i){var r=v.default.Deferred();return k.cardlyticsCache.isCardlyticsStorageExists(O.cardlyticsConstants.cardlyticsLocation)&&(t.location=k.cardlyticsCache.getStorage(O.cardlyticsConstants.cardlyticsLocation)),a.cardlyticsImpression.invokeMultipleViewEvent(e,t,function(e){e.success?(I.Topic("multipleViewEvent").publish(!0),r.resolve(!0)):(I.Topic("multipleViewEvent").publish(!1),r.reject(!1))},function(){I.Topic("multipleViewEvent").publish(!1),r.reject(!1)}),r.promise()}}}),define("slotplacement/service",["mktui-fx/ads/client/client.service"],function(e){return e.clientService}),define("slotplacement/contentprovider",["mktui-fx/ads/content/content.service"],function(e){return e.contentService}),define("slotplacement/topic",["mktui-fx/ads/topic"],function(e){return e.Topic}),define("slotplacement/placement",["mktui-fx/ads/placement/placement"],function(e){return e.Slot}),define("slotplacement/cardlyticsinit",["mktui-fx/cardlytics/cardlyticsinit"],function(e){return e.cardlyticsInit});